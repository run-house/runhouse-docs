{"parents": [], "prev": {"link": "../troubleshooting/", "title": "Manual Setup and Troubleshooting"}, "next": null, "title": "Security and Authentication", "meta": {}, "body": "<section id=\"security-and-authentication\">\n<h1>Security and Authentication<a class=\"headerlink\" href=\"#security-and-authentication\" title=\"Permalink to this heading\">\u00b6</a></h1>\n<p>By default, Runhouse collects metadata from provisioned clusters and data relating to performance and error monitoring.\nThis data will only be used by Runhouse to improve the product.\nNo Personal Identifiable Information (PII) is collected and we will not sell or buy data about you.</p>\n<section id=\"cluster-metadata-collection\">\n<h2>Cluster Metadata Collection<a class=\"headerlink\" href=\"#cluster-metadata-collection\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>We collect non-sensitive data on the cluster that helps us understand how Runhouse is being used. This data includes:</p>\n<ul class=\"simple\">\n<li><p>Python version</p></li>\n<li><p>Resources (cpus, gpus, memory)</p></li>\n<li><p>Cloud provider</p></li>\n<li><p>Region</p></li>\n<li><p>Instance type</p></li>\n</ul>\n</section>\n<section id=\"performance-error-monitoring\">\n<h2>Performance &amp; Error Monitoring<a class=\"headerlink\" href=\"#performance-error-monitoring\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>We collect data from normal package usage that helps us understand the performance and errors that are raised.\nThis data is collected and sent to <a class=\"reference external\" href=\"https://sentry.io/\">Sentry</a>, a third-party error tracking service.</p>\n</section>\n<section id=\"removing-collected-data\">\n<h2>Removing Collected Data<a class=\"headerlink\" href=\"#removing-collected-data\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>If you would like us to remove your collected data, please contact us.</p>\n</section>\n<section id=\"disabling-data-collection\">\n<h2>Disabling Data Collection<a class=\"headerlink\" href=\"#disabling-data-collection\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>To disable data collection and error tracking collection, set <code class=\"code docutils literal notranslate\"><span class=\"pre\">disable_data_collection</span></code> to <code class=\"code docutils literal notranslate\"><span class=\"pre\">true</span></code> in your\nlocal Runhouse config (<code class=\"code docutils literal notranslate\"><span class=\"pre\">~/.rh/config.yaml</span></code>), or in Python:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">configs</span><span class=\"o\">.</span><span class=\"n\">disable_data_collection</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</section>\n<section id=\"cluster-authentication-verification\">\n<h2>Cluster Authentication &amp; Verification<a class=\"headerlink\" href=\"#cluster-authentication-verification\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>Runhouse provides a couple of options to manage the connection to the Runhouse API server running on a cluster.</p>\n<section id=\"api-server-connection\">\n<h3>API Server Connection<a class=\"headerlink\" href=\"#api-server-connection\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>The below options can be specified with the <code class=\"docutils literal notranslate\"><span class=\"pre\">server_connection_type</span></code> parameter\nwhen <a class=\"reference internal\" href=\"../api/python/cluster/#cluster-factory-method\"><span class=\"std std-ref\">initializing a cluster</span></a>:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">ssh</span></code>: Connects to the cluster via port forwarding. The API server will be started with HTTP.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code>: Connects to the cluster via port forwarding and enforces verification via TLS certificates. The API server\nwill be started with HTTPS. Only users with a valid cert will be able to make requests to the API server.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code>: Does not use any port forwarding or enforce any authentication. The API server will be started\nwith HTTP.</p></li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> connection type is the most secure and is recommended for production use if you are not running inside\nof a VPC.</p>\n</div>\n</section>\n<section id=\"api-server-auth\">\n<h3>API Server Auth<a class=\"headerlink\" href=\"#api-server-auth\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>Runhouse allows you to authenticate users via their Runhouse token (generated when\n<a class=\"reference internal\" href=\"../api/python/login/#login-logout\"><span class=\"std std-ref\">logging in</span></a>) and saved to local Runhouse configs in path: <code class=\"code docutils literal notranslate\"><span class=\"pre\">~/.rh/config.yaml</span></code>.</p>\n<p>When <a class=\"reference internal\" href=\"../api/python/cluster/#cluster-factory-method\"><span class=\"std std-ref\">initializing a cluster</span></a>, you can set the <code class=\"code docutils literal notranslate\"><span class=\"pre\">den_auth</span></code> parameter to <code class=\"code docutils literal notranslate\"><span class=\"pre\">True</span></code>\nto enable token authentication. Runhouse will handle adding the token to each subsequent request as an auth header with\nformat: <code class=\"code docutils literal notranslate\"><span class=\"pre\">{&quot;Authorization&quot;:</span> <span class=\"pre\">&quot;Bearer</span> <span class=\"pre\">&lt;token&gt;&quot;}</span></code></p>\n<p>Enabling TLS and Den Auth for the API server makes it incredibly fast and easy to stand up a microservice with\nstandard token authentication, allowing you to easily share Runhouse resources with collaborators, teams,\ncustomers, etc.</p>\n<p>Let\u2019s illustrate this with a simple example:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">np_array</span><span class=\"p\">(</span><span class=\"n\">num_list</span><span class=\"p\">:</span> <span class=\"nb\">list</span><span class=\"p\">):</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">num_list</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Launch a cluster with TLS and Den Auth enabled</span>\n<span class=\"n\">cpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;m5.xlarge&quot;</span><span class=\"p\">,</span>\n                          <span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">,</span>\n                          <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;rh-cluster&quot;</span><span class=\"p\">,</span>\n                          <span class=\"n\">den_auth</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                          <span class=\"n\">server_connection_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;tls&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">up_if_not</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># Remote function stub which lives on the cluster</span>\n<span class=\"n\">remote_func</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">np_array</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">(</span><span class=\"n\">cpu</span><span class=\"p\">,</span> <span class=\"n\">env</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;numpy&quot;</span><span class=\"p\">])</span>\n<span class=\"n\">my_list</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]</span>\n\n<span class=\"c1\"># Run function on cluster</span>\n<span class=\"c1\"># Note: only users with a Runhouse token and access to this cluster can call this function</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">remote_func</span><span class=\"p\">(</span><span class=\"n\">my_list</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>For more examples on using clusters and functions see\nthe <a class=\"reference internal\" href=\"../tutorials/api/compute/#compute-clusters-functions-packages-envs\"><span class=\"std std-ref\">Compute Guide</span></a>.</p>\n</div>\n</section>\n</section>\n</section>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            name: \"python3\",\n            path: \"./.\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["troubleshooting", "Manual Setup and Troubleshooting", "P", "previous"]], "sourcename": "auth_and_data_collection.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Security and Authentication</a><ul>\n<li><a class=\"reference internal\" href=\"#cluster-metadata-collection\">Cluster Metadata Collection</a></li>\n<li><a class=\"reference internal\" href=\"#performance-error-monitoring\">Performance &amp; Error Monitoring</a></li>\n<li><a class=\"reference internal\" href=\"#removing-collected-data\">Removing Collected Data</a></li>\n<li><a class=\"reference internal\" href=\"#disabling-data-collection\">Disabling Data Collection</a></li>\n<li><a class=\"reference internal\" href=\"#cluster-authentication-verification\">Cluster Authentication &amp; Verification</a><ul>\n<li><a class=\"reference internal\" href=\"#api-server-connection\">API Server Connection</a></li>\n<li><a class=\"reference internal\" href=\"#api-server-auth\">API Server Auth</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "globaltoc": "<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Getting Started</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/quick_start/\">Quick Start Guide</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"architecture/\">Architecture Overview</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api_tutorials/\">API Tutorials</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/compute/\">Compute: Clusters, Functions, Packages, &amp; Envs</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/data/\">Data: Folders, Tables, &amp; Blobs</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/accessibility/\">Accessibility: Resource and Secrets Management</a></li>\n</ul>\n</li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API Reference</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/python/\">Python API</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/resource/\">Resource</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/function/\">Function</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/cluster/\">Cluster</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/env/\">Env</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/package/\">Package</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/run/\">Run</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/module/\">Module</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/folder/\">Folder</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/table/\">Table</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/blob/\">Blob</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/secrets/\">Secrets</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/login/\">Login/Logout</a></li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/cli/\">Command Line Interface</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Usage Examples</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/inference/\">Inference: Stable Diffusion and FLAN-T5</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/training/\">Training: Transformers</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/distributed/\">Distributed: HF Accelerate</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/funhouse/tree/main/bert_pipeline\">Pipelining: BERT</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Additional Resources</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"debugging_logging/\">Debugging and Logging</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"troubleshooting/\">Manual Setup and Troubleshooting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"auth_and_data_collection/\">Security and Authentication</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/runhouse\">Source Code</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://api.run.house/docs\">REST API Guide</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://www.run.house/dashboard\">Dashboard</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/funhouse\">Funhouse</a></li>\n</ul>\n", "current_page_name": "auth_and_data_collection", "sidebars": ["about.html", "navigation.html", "relations.html", "searchbox.html", "donate.html"], "customsidebar": null, "alabaster_version": "0.7.13"}