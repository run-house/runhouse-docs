{"parents": [{"link": "../../main/", "title": "Python API"}], "prev": {"link": "../function/", "title": "Function"}, "next": {"link": "../package/", "title": "Package"}, "title": "Cluster", "meta": {}, "body": "<div class=\"section\" id=\"cluster\">\n<h1>Cluster<a class=\"headerlink\" href=\"#cluster\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>A Cluster is a Runhouse primitive used for abstracting a particular hardware configuration.\nThis can be either an <span class=\"xref std std-ref\">on-demand cluster</span> (requires valid cloud credentials) or a BYO\n(bring-your-own) cluster (requires IP address and ssh creds).</p>\n<p>A cluster is assigned a name, through which it can be accessed and reused later on.</p>\n<div class=\"section\" id=\"cluster-factory-method\">\n<h2>Cluster Factory Method<a class=\"headerlink\" href=\"#cluster-factory-method\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"runhouse.cluster\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_spot</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_id</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ips</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_creds</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">dict</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">load</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">Union</span><span class=\"p\"><span class=\"pre\">[</span></span><a class=\"reference internal\" href=\"#runhouse.Cluster\" title=\"runhouse.rns.hardware.cluster.Cluster\"><span class=\"pre\">runhouse.rns.hardware.cluster.Cluster</span></a><span class=\"p\"><span class=\"pre\">,</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.rns.hardware.on_demand_cluster.OnDemandCluster\"><span class=\"pre\">runhouse.rns.hardware.on_demand_cluster.OnDemandCluster</span></a><span class=\"p\"><span class=\"pre\">]</span></span></span></span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster_factory/#cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Builds an instance of <a class=\"reference internal\" href=\"#runhouse.Cluster\" title=\"runhouse.Cluster\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Cluster</span></code></a>.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>name</strong> (<em>str</em>) \u2013 Name for the cluster, to re-use later on.</p></li>\n<li><p><strong>instance_type</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Type of cloud instance to use for the cluster. This could\nbe a Runhouse built-in type, or your choice of instance type.</p></li>\n<li><p><strong>num_instances</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Number of instances to use for the cluster.</p></li>\n<li><p><strong>provider</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Cloud provider to use for the cluster.</p></li>\n<li><p><strong>autostop_mins</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Number of minutes to keep the cluster up after inactivity,\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">-1</span></code> to keep cluster up indefinitely.</p></li>\n<li><p><strong>use_spot</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Whether or not to use spot instance.</p></li>\n<li><p><strong>image_id</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Custom image ID for the cluster.</p></li>\n<li><p><strong>region</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 The region to use for the cluster.</p></li>\n<li><p><strong>ips</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) \u2013 List of IP addresses for the BYO cluster.</p></li>\n<li><p><strong>ssh_creds</strong> (<em>dict</em><em>, </em><em>optional</em>) \u2013 Dictionary mapping SSH credentials.\nExample: <code class=\"docutils literal notranslate\"><span class=\"pre\">ssh_creds={'ssh_user':</span> <span class=\"pre\">'...',</span> <span class=\"pre\">'ssh_private_key':'&lt;path_to_key&gt;'}</span></code></p></li>\n<li><p><strong>dryrun</strong> (<em>bool</em>) \u2013 Whether to create the Cluster if it doesn\u2019t exist, or load a Cluster object as a dryrun.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n<li><p><strong>load</strong> (<em>bool</em>) \u2013 Whether to load an existing config for the Cluster. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>The resulting cluster.</p>\n</dd>\n<dt class=\"field-odd\">Return type</dt>\n<dd class=\"field-odd\"><p><a class=\"reference internal\" href=\"#runhouse.Cluster\" title=\"runhouse.Cluster\">Cluster</a> or <a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.OnDemandCluster\">OnDemandCluster</a></p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># BYO Cluster</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">ips</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">&#39;&lt;ip of the cluster&gt;&#39;</span><span class=\"p\">],</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>         <span class=\"n\">ssh_creds</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;ssh_user&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;...&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;ssh_private_key&#39;</span><span class=\"p\">:</span><span class=\"s1\">&#39;&lt;path_to_key&gt;&#39;</span><span class=\"p\">},</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>         <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-a10x&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># On-Demand SkyPilot Cluster (OnDemandCluster)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-4-a100s&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s1\">&#39;A100:4&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s1\">&#39;gcp&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">autostop_mins</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">use_spot</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">image_id</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_ami_string&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">region</span><span class=\"o\">=</span><span class=\"s1\">&#39;us-east-1&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</div>\n<div class=\"section\" id=\"cluster-class\">\n<h2>Cluster Class<a class=\"headerlink\" href=\"#cluster-class\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">Cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ips</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_creds</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">Dict</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><blockquote>\n<div><dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.__init__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__init__</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ips</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_creds</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">Dict</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.__init__\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.__init__\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>The Runhouse cluster, or system. This is where you can run Functions or access/transfer data\nbetween. You can BYO (bring-your-own) cluster by providing cluster IP and ssh_creds, or\nthis can be an on-demand cluster that is spun up/down through\n<a class=\"reference external\" href=\"https://github.com/skypilot-org/skypilot\">SkyPilot</a>, using your cloud credentials.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To build a cluster, please use the factory method <a class=\"reference internal\" href=\"#runhouse.cluster\" title=\"runhouse.cluster\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">cluster()</span></code></a>.</p>\n</div>\n</dd></dl>\n\n</div></blockquote>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.add_secrets\">\n<span class=\"sig-name descname\"><span class=\"pre\">add_secrets</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider_secrets</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">dict</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.add_secrets\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.add_secrets\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Copy secrets from current environment onto the cluster</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.cancel\">\n<span class=\"sig-name descname\"><span class=\"pre\">cancel</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">key</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">force</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.cancel\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.cancel\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Cancel the given run on cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.clear_pins\">\n<span class=\"sig-name descname\"><span class=\"pre\">clear_pins</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">pins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.clear_pins\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.clear_pins\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Remove the given pinned items from the cluster. If <cite>pins</cite> is set to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>, then\nall pinned objects will be cleared.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.get\">\n<span class=\"sig-name descname\"><span class=\"pre\">get</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">key</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">default</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">Any</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stream_logs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.get\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.get\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Get the object at the given key from the cluster\u2019s object store.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.install_packages\">\n<span class=\"sig-name descname\"><span class=\"pre\">install_packages</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">reqs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">Union</span><span class=\"p\"><span class=\"pre\">[</span></span><a class=\"reference internal\" href=\"../package/#runhouse.Package\" title=\"runhouse.rns.packages.package.Package\"><span class=\"pre\">runhouse.rns.packages.package.Package</span></a><span class=\"p\"><span class=\"pre\">,</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"p\"><span class=\"pre\">]</span></span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.install_packages\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.install_packages\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Install the given packages on the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.is_up\">\n<span class=\"sig-name descname\"><span class=\"pre\">is_up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">bool</span></span></span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.is_up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.is_up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Check if the cluster is up.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.notebook\">\n<span class=\"sig-name descname\"><span class=\"pre\">notebook</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">persist</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sync_package_on_close</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">port_forward</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">8888</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.notebook\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.notebook\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Tunnel into and launch notebook from the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.on_same_cluster\">\n<span class=\"sig-name descname\"><span class=\"pre\">on_same_cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">resource</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../resource/#runhouse.rns.resource.Resource\" title=\"runhouse.rns.resource.Resource\"><span class=\"pre\">runhouse.rns.resource.Resource</span></a></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.on_same_cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.on_same_cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Whether the given resource is on the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.pause_autostop\">\n<span class=\"sig-name descname\"><span class=\"pre\">pause_autostop</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.pause_autostop\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.pause_autostop\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Context manager to temporarily pause autostop. Mainly for OnDemand clusters, for BYO cluster\nthere is no autostop.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.put\">\n<span class=\"sig-name descname\"><span class=\"pre\">put</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">key</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">obj</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Any</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.put\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.put\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Put the given object on the cluster\u2019s object store at the given key.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.restart_grpc_server\">\n<span class=\"sig-name descname\"><span class=\"pre\">restart_grpc_server</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">_rh_install_url</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">resync_rh</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">restart_ray</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.restart_grpc_server\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.restart_grpc_server\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Restart the GRPC server.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.rsync\">\n<span class=\"sig-name descname\"><span class=\"pre\">rsync</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">source</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dest</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">up</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">contents</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.rsync\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.rsync\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Sync the contents of the source directory into the destination.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.run\">\n<span class=\"sig-name descname\"><span class=\"pre\">run</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">commands</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stream_logs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">port_forward</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">require_outputs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.run\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.run\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Run a list of shell commands on the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.run_python\">\n<span class=\"sig-name descname\"><span class=\"pre\">run_python</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">commands</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stream_logs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">port_forward</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.run_python\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.run_python\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Run a list of python commands on the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.send_secrets\">\n<span class=\"sig-name descname\"><span class=\"pre\">send_secrets</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">providers</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.send_secrets\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.send_secrets\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Send secrets for the given providers. If none provided will send secrets for providers that have been\nconfigured in the environment.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.up_if_not\">\n<span class=\"sig-name descname\"><span class=\"pre\">up_if_not</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/cluster/#Cluster.up_if_not\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.up_if_not\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Bring up the cluster if it is not up. No-op if cluster is already up.</p>\n</dd></dl>\n\n</dd></dl>\n\n</div>\n<div class=\"section\" id=\"ondemandcluster-class\">\n<h2>OnDemandCluster Class<a class=\"headerlink\" href=\"#ondemandcluster-class\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>A OnDemandCluster is a cluster that uses SkyPilot functionality underneath to handle\nvarious cluster properties.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OnDemandCluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_spot</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_id</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sky_state</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><blockquote>\n<div><dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.__init__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__init__</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Optional</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_spot</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_id</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sky_state</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.__init__\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.__init__\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>On-demand <a class=\"reference external\" href=\"https://github.com/skypilot-org/skypilot/\">SkyPilot</a> Cluster.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To build a cluster, please use the factory method <a class=\"reference internal\" href=\"#runhouse.cluster\" title=\"runhouse.cluster\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">cluster()</span></code></a>.</p>\n</div>\n</dd></dl>\n\n</div></blockquote>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.cluster_ssh_key\">\n<em class=\"property\"><span class=\"pre\">static</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">cluster_ssh_key</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">path_to_file</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.cluster_ssh_key\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.cluster_ssh_key\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Retrieve SSH key for the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.is_up\">\n<span class=\"sig-name descname\"><span class=\"pre\">is_up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">bool</span></span></span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.is_up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.is_up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Whether the cluster is up.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.keep_warm\">\n<span class=\"sig-name descname\"><span class=\"pre\">keep_warm</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">-</span> <span class=\"pre\">1</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.keep_warm\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.keep_warm\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Keep the cluster warm for given number of minutes after inactivity. If <cite>autostop_mins</cite> is set\nto -1, keep cluster warm indefinitely.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.pause_autostop\">\n<span class=\"sig-name descname\"><span class=\"pre\">pause_autostop</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.pause_autostop\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.pause_autostop\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Context manager to temporarily pause autostop. Mainly for OnDemand clusters, for BYO cluster\nthere is no autostop.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.ssh\">\n<span class=\"sig-name descname\"><span class=\"pre\">ssh</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.ssh\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.ssh\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>SSH into the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.status\">\n<span class=\"sig-name descname\"><span class=\"pre\">status</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">refresh</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.status\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.status\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Get status of Sky cluster.</p>\n<p>Return dict looks like:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span><span class=\"s1\">&#39;name&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;sky-cpunode-donny&#39;</span><span class=\"p\">,</span>\n <span class=\"s1\">&#39;launched_at&#39;</span><span class=\"p\">:</span> <span class=\"mi\">1662317201</span><span class=\"p\">,</span>\n <span class=\"s1\">&#39;handle&#39;</span><span class=\"p\">:</span> <span class=\"n\">ResourceHandle</span><span class=\"p\">(</span>\n              <span class=\"n\">cluster_name</span><span class=\"o\">=</span><span class=\"n\">sky</span><span class=\"o\">-</span><span class=\"n\">cpunode</span><span class=\"o\">-</span><span class=\"n\">donny</span><span class=\"p\">,</span>\n              <span class=\"n\">head_ip</span><span class=\"o\">=</span><span class=\"mf\">54.211.97.164</span><span class=\"p\">,</span>\n              <span class=\"n\">cluster_yaml</span><span class=\"o\">=/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">donny</span><span class=\"o\">/.</span><span class=\"n\">sky</span><span class=\"o\">/</span><span class=\"n\">generated</span><span class=\"o\">/</span><span class=\"n\">sky</span><span class=\"o\">-</span><span class=\"n\">cpunode</span><span class=\"o\">-</span><span class=\"n\">donny</span><span class=\"o\">.</span><span class=\"n\">yml</span><span class=\"p\">,</span>\n              <span class=\"n\">launched_resources</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"n\">x</span> <span class=\"n\">AWS</span><span class=\"p\">(</span><span class=\"n\">m6i</span><span class=\"mf\">.2</span><span class=\"n\">xlarge</span><span class=\"p\">),</span>\n              <span class=\"n\">tpu_create_script</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n              <span class=\"n\">tpu_delete_script</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">),</span>\n <span class=\"s1\">&#39;last_use&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;sky cpunode&#39;</span><span class=\"p\">,</span>\n <span class=\"s1\">&#39;status&#39;</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">ClusterStatus</span><span class=\"o\">.</span><span class=\"n\">UP</span><span class=\"p\">:</span> <span class=\"s1\">&#39;UP&#39;</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"s1\">&#39;autostop&#39;</span><span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n <span class=\"s1\">&#39;metadata&#39;</span><span class=\"p\">:</span> <span class=\"p\">{}}</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>For more information:\n<a class=\"reference external\" href=\"https://github.com/skypilot-org/skypilot/blob/0c2b291b03abe486b521b40a3069195e56b62324/sky/backends/cloud_vm_ray_backend.py#L1457\">https://github.com/skypilot-org/skypilot/blob/0c2b291b03abe486b521b40a3069195e56b62324/sky/backends/cloud_vm_ray_backend.py#L1457</a></p>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.teardown\">\n<span class=\"sig-name descname\"><span class=\"pre\">teardown</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.teardown\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.teardown\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Teardown cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.teardown_and_delete\">\n<span class=\"sig-name descname\"><span class=\"pre\">teardown_and_delete</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.teardown_and_delete\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.teardown_and_delete\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Teardown cluster and delete it from configs.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.up\">\n<span class=\"sig-name descname\"><span class=\"pre\">up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../_modules/runhouse/rns/hardware/on_demand_cluster/#OnDemandCluster.up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Up the cluster.</p>\n</dd></dl>\n\n</dd></dl>\n\n</div>\n<div class=\"section\" id=\"hardware-setup\">\n<h2>Hardware Setup<a class=\"headerlink\" href=\"#hardware-setup\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>For BYO Clusters, no additional setup is required. You will just need to have the IP address for the cluster\nand the path to SSH credentials ready to be used for the cluster initialization.</p>\n<p>For On-Demand Clusters, which use SkyPilot to automatically spin up and down clusters on the cloud, you will\nneed to first set up cloud access on your local machine:</p>\n<p>Run <code class=\"docutils literal notranslate\"><span class=\"pre\">sky</span> <span class=\"pre\">check</span></code> to see which cloud providers are enabled, and how to set up cloud credentials for each of the\nproviders.</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>sky check\n</pre></div>\n</div>\n<p>For a more in depth tutorial on setting up individual cloud credentials, you can refer to\n<a class=\"reference external\" href=\"https://skypilot.readthedocs.io/en/latest/getting-started/installation.html#cloud-account-setup\">SkyPilot setup docs</a>.</p>\n</div>\n<div class=\"section\" id=\"basic-api-usage\">\n<h2>Basic API Usage<a class=\"headerlink\" href=\"#basic-api-usage\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>For On-Demand Clusters, use the <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.cluster</span></code> factory method as follows.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-4-a100s&#39;</span><span class=\"p\">,</span>\n                        <span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s1\">&#39;A100:4&#39;</span><span class=\"p\">,</span>    <span class=\"c1\"># or &#39;CPU:8&#39;, &#39;g5.2xlarge&#39;, etc</span>\n                        <span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s1\">&#39;gcp&#39;</span><span class=\"p\">,</span>            <span class=\"c1\"># Defaults to `cheapest` if empty</span>\n                        <span class=\"n\">autostop_mins</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">,</span>          <span class=\"c1\"># Defaults to default_autostop_mins, -1 suspends autostop</span>\n                        <span class=\"n\">use_spot</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>             <span class=\"c1\"># You must have spot quota approved to use this</span>\n                        <span class=\"n\">image_id</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_ami_string&#39;</span><span class=\"p\">,</span>  <span class=\"c1\"># Generally defaults to basic deep-learning AMIs</span>\n                        <span class=\"n\">region</span><span class=\"o\">=</span><span class=\"s1\">&#39;us-east-1&#39;</span>         <span class=\"c1\"># Looks for cheapest on your continent if empty</span>\n                        <span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>For BYO Clusters, which are specified by IP addresses and SSH credentials, use the <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.cluster</span></code> factory\nmethod as follows:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">ips</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">&#39;&lt;ip of the cluster&gt;&#39;</span><span class=\"p\">],</span>\n                        <span class=\"n\">ssh_creds</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;ssh_user&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;...&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;ssh_private_key&#39;</span><span class=\"p\">:</span><span class=\"s1\">&#39;&lt;path_to_key&gt;&#39;</span><span class=\"p\">},</span>\n                        <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-a10x&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>For existing clusters, which can mean either a saved OnDemandCluster config (which will be brought back\nup if needed), or a BYO or OnDemandCluster that is already up, you can simply pass in the name to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">rh.cluster</span></code> as follows:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;~/my-local-a100&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">my_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;@/my-a100-in-rh-rns&#39;</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># or, if you just want to load the Cluster object without refreshing its status</span>\n<span class=\"n\">my_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;^rh-v100&#39;</span><span class=\"p\">,</span> <span class=\"n\">dryrun</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"advanced-api-usage\">\n<h2>Advanced API Usage<a class=\"headerlink\" href=\"#advanced-api-usage\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Additional utilites for on-demand Clusters include\n<a class=\"reference internal\" href=\"../../overview/accessibility/#setting-config-options\"><span class=\"std std-ref\">setting custom default configs</span></a> and\n<a class=\"reference internal\" href=\"../../overview/compute/#on-demand-clusters\"><span class=\"std std-ref\">SkyPilot CLI commands for instance management</span></a>.</p>\n<p>To start an ssh session into the cluster so you can poke around or debug:</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>$ # In CLI\n$ ssh my_cluster_name\n</pre></div>\n</div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># In Python</span>\n<span class=\"n\">my_cluster</span><span class=\"o\">.</span><span class=\"n\">ssh</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Function logs are output onto the cluster, which can be viewed at <code class=\"code docutils literal notranslate\"><span class=\"pre\">~/.rh/&lt;cluster_name&gt;_grpc_server.log</span></code>.</p>\n<p>You can restart the RPC server, in the case that it crashes or you want to update a package that the\nserver has already imported. This runs much more quickly than shutting down and restarting a cluster.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span><span class=\"o\">.</span><span class=\"n\">restart_grpc_server</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>For notebook users, to tunnel a JupyterLab server into your local browser:</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>$ # In CLI\n$ runhouse notebook my_cluster\n</pre></div>\n</div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># In Python</span>\n<span class=\"n\">my_cluster</span><span class=\"o\">.</span><span class=\"n\">notebook</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>To run a Shell command on the cluster:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">([</span><span class=\"s1\">&#39;git clone ...&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;pip install ...&#39;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n<p>To run a Python on the cluster:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span><span class=\"o\">.</span><span class=\"n\">run_python</span><span class=\"p\">([</span><span class=\"s1\">&#39;import torch&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;print(torch.__version__)&#39;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n<p>To open a port, if you want to run an application on the cluster that requires a port to be open,\ne.g. <a class=\"reference external\" href=\"https://www.tensorflow.org/tensorboard/\">Tensorboard</a>, <a class=\"reference external\" href=\"https://gradio.app/\">Gradio</a>:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_cluster</span><span class=\"o\">.</span><span class=\"n\">ssh_tunnel</span><span class=\"p\">(</span><span class=\"n\">local_port</span><span class=\"o\">=</span><span class=\"mi\">7860</span><span class=\"p\">,</span> <span class=\"n\">remote_port</span><span class=\"o\">=</span><span class=\"mi\">7860</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n</div>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            kernelName: \"python3\",\n            path: \"./rh_primitives\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["rh_primitives/package", "Package", "N", "next"], ["rh_primitives/function", "Function", "P", "previous"]], "sourcename": "rh_primitives/cluster.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Cluster</a><ul>\n<li><a class=\"reference internal\" href=\"#cluster-factory-method\">Cluster Factory Method</a></li>\n<li><a class=\"reference internal\" href=\"#cluster-class\">Cluster Class</a></li>\n<li><a class=\"reference internal\" href=\"#ondemandcluster-class\">OnDemandCluster Class</a></li>\n<li><a class=\"reference internal\" href=\"#hardware-setup\">Hardware Setup</a></li>\n<li><a class=\"reference internal\" href=\"#basic-api-usage\">Basic API Usage</a></li>\n<li><a class=\"reference internal\" href=\"#advanced-api-usage\">Advanced API Usage</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "rh_primitives/cluster", "sidebars": ["sidebar-logo.html", "search-field.html", "sbt-sidebar-nav.html", "sbt-sidebar-footer.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "pagetitle": "Cluster", "page_description": "Cluster  A Cluster is a Runhouse primitive used for abstracting a particular hardware configuration. This can be either an on-demand cluster (requires valid clo", "author": "the Runhouse team \ud83c\udfc3\u200d\u2640\ufe0f\ud83c\udfe0", "github_user": "run-house", "github_repo": "runhouse", "github_version": "stable", "doc_path": "docs/", "theme_search_bar_text": "Search the docs ...", "theme_show_toc_level": 1}