{"parents": [{"link": "../", "title": "Python API"}], "prev": {"link": "../module/", "title": "Module"}, "next": {"link": "../folder/", "title": "Folder"}, "title": "Mapper", "meta": {}, "body": "<section id=\"mapper\">\n<h1>Mapper<a class=\"headerlink\" href=\"#mapper\" title=\"Permalink to this heading\">\u00b6</a></h1>\n<p>A Mapper is a built-in Module for mapping a function or module method over a list of inputs,\nacross replicas.</p>\n<section id=\"mapper-factory-method\">\n<h2>Mapper Factory Method<a class=\"headerlink\" href=\"#mapper-factory-method\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"runhouse.mapper\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">mapper</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">module</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.resources.module.Module\"><span class=\"pre\">Module</span></a></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">method</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_replicas</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">-1</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">replicas</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.resources.module.Module\"><span class=\"pre\">Module</span></a><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sync_workdir</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><a class=\"reference internal\" href=\"#runhouse.Mapper\" title=\"runhouse.resources.functionals.mapper.Mapper\"><span class=\"pre\">Mapper</span></a></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/functionals/mapper/#mapper\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.mapper\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>A factory method for creating Mapper modules. A mapper is a module that can map a function or module method over\na list of inputs in various ways.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>module</strong> (<a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.Module\"><em>Module</em></a>) \u2013 The module or function to be mapped.</p></li>\n<li><p><strong>method</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) \u2013 The method of the module to be called. If the module is already a callable,\nthis value defaults to <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;call&quot;</span></code>.</p></li>\n<li><p><strong>num_replicas</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 <p>The number of replicas to run the map function across. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">-1</span></code>)</p>\n<ul>\n<li><p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">num_replicas</span></code> is -1, it will be set to the number of available CPUs (according to Ray).</p></li>\n<li><p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">num_replicas</span></code> is greater than the number of user-specified replicas (<code class=\"docutils literal notranslate\"><span class=\"pre\">replicas</span></code>),\nthe remaining replicas will be auto-generated by duplicating the module.</p></li>\n<li><p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">num_replicas</span></code> is 0, it will be left as the number of user-replicas passed into the module.</p></li>\n<li><p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">num_replicas</span></code> is less than the number of user-specified replicas, only <code class=\"docutils literal notranslate\"><span class=\"pre\">num_replicas</span></code> will\nbe used.</p></li>\n</ul>\n</p></li>\n<li><p><strong>replicas</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.Module\"><em>Module</em></a><em>]</em><em>]</em><em>, </em><em>optional</em>) \u2013 List of user-specified replicas.</p></li>\n<li><p><strong>sync_workdir</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Whether to sync the working dir to the replicated environments.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns<span class=\"colon\">:</span></dt>\n<dd class=\"field-even\"><p>The resulting Mapper object.</p>\n</dd>\n<dt class=\"field-odd\">Return type<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><a class=\"reference internal\" href=\"#runhouse.Mapper\" title=\"runhouse.Mapper\">Mapper</a></p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">remote_fn</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">local_fn</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">(</span><span class=\"n\">cluster</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">mapper</span><span class=\"p\">(</span><span class=\"n\">remote_fn</span><span class=\"p\">,</span> <span class=\"n\">num_replicas</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">remote_module</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">module</span><span class=\"p\">(</span><span class=\"bp\">cls</span><span class=\"o\">=</span><span class=\"n\">MyClass</span><span class=\"p\">,</span> <span class=\"n\">system</span><span class=\"o\">=</span><span class=\"n\">cluster</span><span class=\"p\">,</span> <span class=\"n\">env</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_env&quot;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">mapper</span><span class=\"p\">(</span><span class=\"n\">remote_module</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"n\">my_class_method</span><span class=\"p\">,</span> <span class=\"n\">replicas</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</section>\n<section id=\"mapper-class\">\n<h2>Mapper Class<a class=\"headerlink\" href=\"#mapper-class\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Mapper\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">Mapper</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">module</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.resources.module.Module\"><span class=\"pre\">Module</span></a></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">method</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_replicas</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">-1</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">replicas</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.resources.module.Module\"><span class=\"pre\">Module</span></a><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/functionals/mapper/#Mapper\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Mapper\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><blockquote>\n<div><dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Mapper.__init__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__init__</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">module</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.resources.module.Module\"><span class=\"pre\">Module</span></a></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">method</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_replicas</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">-1</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">replicas</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><a class=\"reference internal\" href=\"../module/#runhouse.Module\" title=\"runhouse.resources.module.Module\"><span class=\"pre\">Module</span></a><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/functionals/mapper/#Mapper.__init__\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Mapper.__init__\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Runhouse Mapper object. It is used for mapping a function or module method over a list of inputs,\nacross a series of replicas.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To create a Mapper, please use the factory method <a class=\"reference internal\" href=\"#runhouse.mapper\" title=\"runhouse.mapper\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">mapper()</span></code></a>.</p>\n</div>\n</dd></dl>\n\n</div></blockquote>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Mapper.call\">\n<span class=\"sig-name descname\"><span class=\"pre\">call</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/functionals/mapper/#Mapper.call\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Mapper.call\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Call the function or method on a single replica.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">local_sum</span><span class=\"p\">(</span><span class=\"n\">arg1</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"p\">,</span> <span class=\"n\">arg3</span><span class=\"p\">):</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"k\">return</span> <span class=\"n\">arg1</span> <span class=\"o\">+</span> <span class=\"n\">arg2</span> <span class=\"o\">+</span> <span class=\"n\">arg3</span>\n<span class=\"gp\">&gt;&gt;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">remote_fn</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">local_sum</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">(</span><span class=\"n\">my_cluster</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">mapper</span><span class=\"p\">(</span><span class=\"n\">remote_fn</span><span class=\"p\">,</span> <span class=\"n\">num_replicas</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">):</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"n\">mapper</span><span class=\"o\">.</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"c1\"># output: 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, run in round-robin replica order</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Mapper.map\">\n<span class=\"sig-name descname\"><span class=\"pre\">map</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/functionals/mapper/#Mapper.map\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Mapper.map\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Map the function or method over a list of arguments.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">local_sum</span><span class=\"p\">(</span><span class=\"n\">arg1</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"p\">,</span> <span class=\"n\">arg3</span><span class=\"p\">):</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"k\">return</span> <span class=\"n\">arg1</span> <span class=\"o\">+</span> <span class=\"n\">arg2</span> <span class=\"o\">+</span> <span class=\"n\">arg3</span>\n<span class=\"gp\">&gt;&gt;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">remote_fn</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">local_sum</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">(</span><span class=\"n\">my_cluster</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">mapper</span><span class=\"p\">(</span><span class=\"n\">remote_fn</span><span class=\"p\">,</span> <span class=\"n\">num_replicas</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># output: [4, 9]</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Mapper.starmap\">\n<span class=\"sig-name descname\"><span class=\"pre\">starmap</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">args_lists</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/functionals/mapper/#Mapper.starmap\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Mapper.starmap\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Like <a class=\"reference internal\" href=\"#runhouse.Mapper.map\" title=\"runhouse.Mapper.map\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">map()</span></code></a> except that the elements of the iterable are expected to be iterables\nthat are unpacked as arguments. An iterable of <code class=\"docutils literal notranslate\"><span class=\"pre\">[(1,2),</span> <span class=\"pre\">(3,</span> <span class=\"pre\">4)]</span></code> results in\n<code class=\"docutils literal notranslate\"><span class=\"pre\">func(1,2),</span> <span class=\"pre\">func(3,4)]</span></code>.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">local_sum</span><span class=\"p\">(</span><span class=\"n\">arg1</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"p\">,</span> <span class=\"n\">arg3</span><span class=\"p\">):</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"k\">return</span> <span class=\"n\">arg1</span> <span class=\"o\">+</span> <span class=\"n\">arg2</span> <span class=\"o\">+</span> <span class=\"n\">arg3</span>\n<span class=\"gp\">&gt;&gt;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">remote_fn</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">local_sum</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">(</span><span class=\"n\">my_cluster</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">mapper</span><span class=\"p\">(</span><span class=\"n\">remote_fn</span><span class=\"p\">,</span> <span class=\"n\">num_replicas</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">arg_list</span> <span class=\"o\">=</span> <span class=\"p\">[(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># runs the function twice, once with args (1, 2) and once with args (3, 4)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mapper</span><span class=\"o\">.</span><span class=\"n\">starmap</span><span class=\"p\">(</span><span class=\"n\">arg_list</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</dd></dl>\n\n</section>\n</section>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            name: \"python3\",\n            path: \"./api/python\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["api/python/folder", "Folder", "N", "next"], ["api/python/module", "Module", "P", "previous"]], "sourcename": "api/python/mapper.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Mapper</a><ul>\n<li><a class=\"reference internal\" href=\"#mapper-factory-method\">Mapper Factory Method</a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.mapper\"><code class=\"docutils literal notranslate\"><span class=\"pre\">mapper()</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#mapper-class\">Mapper Class</a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.Mapper\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Mapper</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.Mapper.__init__\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Mapper.__init__()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Mapper.call\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Mapper.call()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Mapper.map\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Mapper.map()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Mapper.starmap\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Mapper.starmap()</span></code></a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "globaltoc": "<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Getting Started</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/getting_started/cloud_quick_start/\">Cloud Quick Start</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/getting_started/local_quick_start/\">Local Quick Start</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/getting_started/den_quick_start/\">Den Quick Start</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API Basics</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/api_basics/compute/\">Compute: Clusters, Functions &amp; Modules, Packages &amp; Envs</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/api_basics/data/\">Data: Folders, Tables, &amp; Blobs</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/api_basics/secrets/\">Secrets Management</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/api_basics/resources/\">Resource Management</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Extra Topics</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"architecture/\">Architecture Overview</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"debugging_logging/\">Debugging and Logging</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"troubleshooting/\">Manual Setup and Troubleshooting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"security_and_authentication/\">Security and Authentication</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API Reference</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/python/\">Python API</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/resource/\">Resource</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/function/\">Function</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/cluster/\">Cluster</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/env/\">Env</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/package/\">Package</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/module/\">Module</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/mapper/\">Mapper</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/folder/\">Folder</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/table/\">Table</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/blob/\">Blob</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/file/\">File</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/secrets/\">Secrets</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/login/\">Login/Logout</a></li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/cli/\">Command Line Interface</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Examples</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"examples/inference/\">Inference: Stable Diffusion and FLAN-T5</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"examples/training/\">Training: Transformers</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"examples/distributed/\">Distributed: HF Accelerate</a></li>\n</ul>\n", "current_page_name": "api/python/mapper", "sidebars": ["about.html", "navigation.html", "relations.html", "searchbox.html", "donate.html"], "customsidebar": null, "alabaster_version": "0.7.16", "alabaster_version_info": [0, 7, 16]}