{"parents": [{"link": "../", "title": "Python API"}], "prev": {"link": "../function/", "title": "Function"}, "next": {"link": "../env/", "title": "Env"}, "title": "Cluster", "meta": {}, "body": "<section id=\"cluster\">\n<h1>Cluster<a class=\"headerlink\" href=\"#cluster\" title=\"Permalink to this heading\">\u00b6</a></h1>\n<p>A Cluster is a Runhouse primitive used for abstracting a particular hardware configuration.\nThis can be either an <a class=\"reference internal\" href=\"#ondemandcluster-class\"><span class=\"std std-ref\">on-demand cluster</span></a> (requires valid cloud credentials), a\n<span class=\"xref std std-ref\">BYO (bring-your-own) cluster</span> (requires IP address and ssh creds), or a\n<a class=\"reference internal\" href=\"#sagemakercluster-class\"><span class=\"std std-ref\">SageMaker cluster</span></a> (requires an ARN role).</p>\n<p>A cluster is assigned a name, through which it can be accessed and reused later on.</p>\n<section id=\"cluster-factory-methods\">\n<h2>Cluster Factory Methods<a class=\"headerlink\" href=\"#cluster-factory-methods\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"runhouse.cluster\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_creds</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">dict</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">ServerConnectionType</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><a class=\"reference internal\" href=\"#runhouse.Cluster\" title=\"runhouse.resources.hardware.cluster.Cluster\"><span class=\"pre\">Cluster</span></a><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.resources.hardware.on_demand_cluster.OnDemandCluster\"><span class=\"pre\">OnDemandCluster</span></a><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster\" title=\"runhouse.resources.hardware.sagemaker.sagemaker_cluster.SageMakerCluster\"><span class=\"pre\">SageMakerCluster</span></a></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster_factory/#cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Builds an instance of <a class=\"reference internal\" href=\"#runhouse.Cluster\" title=\"runhouse.Cluster\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Cluster</span></code></a>.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>name</strong> (<em>str</em>) \u2013 Name for the cluster, to re-use later on.</p></li>\n<li><p><strong>host</strong> (<em>str</em><em> or </em><em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) \u2013 Hostname (e.g. domain or name in .ssh/config), IP address, or list of IP\naddresses for the cluster (the first of which is the head node).</p></li>\n<li><p><strong>ssh_creds</strong> (<em>dict</em><em>, </em><em>optional</em>) \u2013 Dictionary mapping SSH credentials.\nExample: <code class=\"docutils literal notranslate\"><span class=\"pre\">ssh_creds={'ssh_user':</span> <span class=\"pre\">'...',</span> <span class=\"pre\">'ssh_private_key':'&lt;path_to_key&gt;'}</span></code></p></li>\n<li><p><strong>server_port</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Port to use for the server. If not provided will use 80 for a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">server_connection_type</span></code> of <code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code>, 443 for <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">32300</span></code> for all other SSH connection types.</p></li>\n<li><p><strong>server_host</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Host from which the server listens for traffic (i.e. the \u2013host argument\n<cite>runhouse start</cite> run on the cluster). Defaults to \u201c0.0.0.0\u201d unless connecting to the server with an SSH\nconnection, in which case <code class=\"docutils literal notranslate\"><span class=\"pre\">localhost</span></code> is used.</p></li>\n<li><p><strong>server_connection_type</strong> (<em>ServerConnectionType</em><em> or </em><em>str</em><em>, </em><em>optional</em>) \u2013 Type of connection to use for the Runhouse\nAPI server. <code class=\"docutils literal notranslate\"><span class=\"pre\">ssh</span></code> will use start with server via an SSH tunnel. <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> will start the server\nwith HTTPS on port 443 using TLS certs without an SSH tunnel. <code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code> will start the server with HTTP\nwithout an SSH tunnel. <code class=\"docutils literal notranslate\"><span class=\"pre\">aws_ssm</span></code> will start the server with HTTP using AWS SSM port forwarding.\n<a href=\"#id1\"><span class=\"problematic\" id=\"id2\">``</span></a>paramiko``will use paramiko to create an SSH tunnel to the cluster.</p></li>\n<li><p><strong>ssl_keyfile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path to SSL key file to use for launching the API server with HTTPS.</p></li>\n<li><p><strong>ssl_certfile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path to SSL certificate file to use for launching the API server with HTTPS.</p></li>\n<li><p><strong>domain</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Domain name for the cluster. Relevant if enabling HTTPs on the cluster.</p></li>\n<li><p><strong>den_auth</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Whether to use Den authorization on the server. If <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>, will validate incoming\nrequests with a Runhouse token provided in the auth headers of the request with the format:\n<code class=\"docutils literal notranslate\"><span class=\"pre\">{&quot;Authorization&quot;:</span> <span class=\"pre\">&quot;Bearer</span> <span class=\"pre\">&lt;token&gt;&quot;}</span></code>. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>).</p></li>\n<li><p><strong>dryrun</strong> (<em>bool</em>) \u2013 Whether to create the Cluster if it doesn\u2019t exist, or load a Cluster object as a dryrun.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns<span class=\"colon\">:</span></dt>\n<dd class=\"field-even\"><p>The resulting cluster.</p>\n</dd>\n<dt class=\"field-odd\">Return type<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p>Union[<a class=\"reference internal\" href=\"#runhouse.Cluster\" title=\"runhouse.Cluster\">Cluster</a>, <a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.OnDemandCluster\">OnDemandCluster</a>, <a class=\"reference internal\" href=\"#runhouse.SageMakerCluster\" title=\"runhouse.SageMakerCluster\">SageMakerCluster</a>]</p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># using private key</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s1\">&#39;&lt;hostname&gt;&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">ssh_creds</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;ssh_user&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;...&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;ssh_private_key&#39;</span><span class=\"p\">:</span><span class=\"s1\">&#39;&lt;path_to_key&gt;&#39;</span><span class=\"p\">},</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-a10x&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># using password</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s1\">&#39;&lt;hostname&gt;&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">ssh_creds</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;ssh_user&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;...&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">:</span><span class=\"s1\">&#39;*****&#39;</span><span class=\"p\">},</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-a10x&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Load cluster from above</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">reloaded_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;rh-a10x&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"runhouse.ondemand_cluster\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">ondemand_cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_spot</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_id</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">memory</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">disk_size</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">open_ports</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">ServerConnectionType</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.resources.hardware.on_demand_cluster.OnDemandCluster\"><span class=\"pre\">OnDemandCluster</span></a></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster_factory/#ondemand_cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.ondemand_cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Builds an instance of <a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.OnDemandCluster\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OnDemandCluster</span></code></a>. Note that image_id, region, memory, disk_size, and open_ports\nare all passed through to SkyPilot\u2019s <a class=\"reference external\" href=\"https://skypilot.readthedocs.io/en/latest/reference/api.html#resources\">Resource constructor</a>.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>name</strong> (<em>str</em>) \u2013 Name for the cluster, to re-use later on.</p></li>\n<li><p><strong>instance_type</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Type of cloud instance to use for the cluster. This could\nbe a Runhouse built-in type, or your choice of instance type.</p></li>\n<li><p><strong>num_instances</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Number of instances to use for the cluster.</p></li>\n<li><p><strong>provider</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Cloud provider to use for the cluster.</p></li>\n<li><p><strong>autostop_mins</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Number of minutes to keep the cluster up after inactivity,\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">-1</span></code> to keep cluster up indefinitely.</p></li>\n<li><p><strong>use_spot</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Whether or not to use spot instance.</p></li>\n<li><p><strong>image_id</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Custom image ID for the cluster.</p></li>\n<li><p><strong>region</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 The region to use for the cluster.</p></li>\n<li><p><strong>memory</strong> (<em>int</em><em> or </em><em>str</em><em>, </em><em>optional</em>) \u2013 Amount of memory to use for the cluster, e.g. \u201c16\u201d or \u201c16+\u201d.</p></li>\n<li><p><strong>disk_size</strong> (<em>int</em><em> or </em><em>str</em><em>, </em><em>optional</em>) \u2013 Amount of disk space to use for the cluster, e.g. \u201c100\u201d or \u201c100+\u201d.</p></li>\n<li><p><strong>open_ports</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>List</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) \u2013 Ports to open in the cluster\u2019s security group. Note\nthat you are responsible for ensuring that the applications listening on these ports are secure.</p></li>\n<li><p><strong>server_port</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Port to use for the server. If not provided will use 80 for a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">server_connection_type</span></code> of <code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code>, 443 for <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">32300</span></code> for all other SSH connection types.</p></li>\n<li><p><strong>server_host</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Host from which the server listens for traffic (i.e. the \u2013host argument\n<cite>runhouse start</cite> run on the cluster). Defaults to \u201c0.0.0.0\u201d unless connecting to the server with an SSH\nconnection, in which case <code class=\"docutils literal notranslate\"><span class=\"pre\">localhost</span></code> is used.</p></li>\n<li><p><strong>server_connection_type</strong> (<em>ServerConnectionType</em><em> or </em><em>str</em><em>, </em><em>optional</em>) \u2013 Type of connection to use for the Runhouse\nAPI server. <code class=\"docutils literal notranslate\"><span class=\"pre\">ssh</span></code> will use start with server via an SSH tunnel. <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> will start the server\nwith HTTPS on port 443 using TLS certs without an SSH tunnel. <code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code> will start the server with HTTP\nwithout an SSH tunnel. <code class=\"docutils literal notranslate\"><span class=\"pre\">aws_ssm</span></code> will start the server with HTTP using AWS SSM port forwarding.\n<a href=\"#id3\"><span class=\"problematic\" id=\"id4\">``</span></a>paramiko``will use paramiko to create an SSH tunnel to the cluster.</p></li>\n<li><p><strong>ssl_keyfile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path to SSL key file to use for launching the API server with HTTPS.</p></li>\n<li><p><strong>ssl_certfile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path to SSL certificate file to use for launching the API server with HTTPS.</p></li>\n<li><p><strong>domain</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Domain name for the cluster. Relevant if enabling HTTPs on the cluster.</p></li>\n<li><p><strong>den_auth</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Whether to use Den authorization on the server. If <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>, will validate incoming\nrequests with a Runhouse token provided in the auth headers of the request with the format:\n<code class=\"docutils literal notranslate\"><span class=\"pre\">{&quot;Authorization&quot;:</span> <span class=\"pre\">&quot;Bearer</span> <span class=\"pre\">&lt;token&gt;&quot;}</span></code>. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>).</p></li>\n<li><p><strong>dryrun</strong> (<em>bool</em>) \u2013 Whether to create the Cluster if it doesn\u2019t exist, or load a Cluster object as a dryrun.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns<span class=\"colon\">:</span></dt>\n<dd class=\"field-even\"><p>The resulting cluster.</p>\n</dd>\n<dt class=\"field-odd\">Return type<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\" title=\"runhouse.OnDemandCluster\">OnDemandCluster</a></p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># On-Demand SkyPilot Cluster (OnDemandCluster)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;rh-4-a100s&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s1\">&#39;A100:4&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s1\">&#39;gcp&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">autostop_mins</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">use_spot</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">image_id</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_ami_string&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"n\">region</span><span class=\"o\">=</span><span class=\"s1\">&#39;us-east-1&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                 <span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Load cluster from above</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">reloaded_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;rh-4-a100s&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"runhouse.sagemaker_cluster\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">sagemaker_cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">role</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">profile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_key_path</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_id</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_uri</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">connection_wait_time</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">estimator</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">sagemaker.estimator.EstimatorBase</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">Dict</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">job_name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">ServerConnectionType</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster\" title=\"runhouse.resources.hardware.sagemaker.sagemaker_cluster.SageMakerCluster\"><span class=\"pre\">SageMakerCluster</span></a></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster_factory/#sagemaker_cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.sagemaker_cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Builds an instance of <a class=\"reference internal\" href=\"#runhouse.SageMakerCluster\" title=\"runhouse.SageMakerCluster\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">SageMakerCluster</span></code></a>. See SageMaker Hardware Setup section for more specific\ninstructions and requirements for providing the role and setting up the cluster.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>name</strong> (<em>str</em>) \u2013 Name for the cluster, to re-use later on.</p></li>\n<li><p><strong>role</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 An AWS IAM role (either name or full ARN).\nCan be passed in explicitly as an argument or provided via an estimator. If not specified will try\nusing the <code class=\"docutils literal notranslate\"><span class=\"pre\">profile</span></code> attribute or environment variable <code class=\"docutils literal notranslate\"><span class=\"pre\">AWS_PROFILE</span></code> to extract the relevant role ARN.\nMore info on configuring an IAM role for SageMaker\n<a class=\"reference external\" href=\"https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html\">here</a>.</p></li>\n<li><p><strong>profile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 AWS profile to use for the cluster. If provided instead of a <code class=\"docutils literal notranslate\"><span class=\"pre\">role</span></code>, will lookup\nthe role ARN associated with the profile in the local AWS credentials.\nIf not provided, will use the <code class=\"docutils literal notranslate\"><span class=\"pre\">default</span></code> profile.</p></li>\n<li><p><strong>ssh_key_path</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path (relative or absolute) to private SSH key to use for connecting to\nthe cluster. If not provided, will look for the key in path <code class=\"docutils literal notranslate\"><span class=\"pre\">~/.ssh/sagemaker-ssh-gw</span></code>.\nIf not found will generate new keys and upload the public key to the default s3 bucket for the Role ARN.</p></li>\n<li><p><strong>instance_id</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 ID of the AWS instance to use for the cluster. SageMaker does not expose\nIP addresses of its instance, so we use an instance ID as a unique identifier for the cluster.</p></li>\n<li><p><strong>instance_type</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 <p>Type of AWS instance to use for the cluster. More info on supported\ninstance options <a class=\"reference external\" href=\"https://aws.amazon.com/sagemaker/pricing/instance-types\">here</a>.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">ml.m5.large</span></code>.)</p>\n</p></li>\n<li><p><strong>num_instances</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Number of instances to use for the cluster.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code>.)</p></li>\n<li><p><strong>image_uri</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Image to use for the cluster instead of using the default SageMaker image which\nwill be based on the framework_version and py_version. Can be an ECR url or dockerhub image and tag.</p></li>\n<li><p><strong>estimator</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>sagemaker.estimator.EstimatorBase</em><em>]</em><em>, </em><em>optional</em>) \u2013 <p>Estimator to use for a dedicated\ntraining job. Leave as <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> if launching the compute without running a dedicated job.\nMore info on creating an estimator <a class=\"reference external\" href=\"https://sagemaker.readthedocs.io/en/stable/frameworks/pytorch/using_pytorch.html#create-an-estimator\">here</a>.</p>\n</p></li>\n<li><p><strong>autostop_mins</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Number of minutes to keep the cluster up after inactivity,\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">-1</span></code> to keep cluster up indefinitely. <em>Note: this will keep the cluster up even if a dedicated\ntraining job has finished running or failed</em>.</p></li>\n<li><p><strong>connection_wait_time</strong> (<em>int</em><em>, </em><em>optional</em>) \u2013 Amount of time to wait inside the SageMaker cluster before\ncontinuing with normal execution. Useful if you want to connect before a dedicated job starts\n(e.g. training). If you don\u2019t want to wait, set it to <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code>.\nIf no estimator is provided, will default to <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code>.</p></li>\n<li><p><strong>job_name</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Name to provide for a training job. If not provided will generate a default name\nbased on the image name and current timestamp (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">pytorch-training-2023-08-28-20-57-55-113</span></code>).</p></li>\n<li><p><strong>server_port</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Port to use for the server (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">32300</span></code>).</p></li>\n<li><p><strong>server_host</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Host from which the server listens for traffic (i.e. the \u2013host argument\n<cite>runhouse start</cite> run on the cluster).\n<em>Note: For SageMaker, since we connect to the Runhouse API server via an SSH tunnel, the only valid\nhost is localhost.</em></p></li>\n<li><p><strong>server_connection_type</strong> (<em>ServerConnectionType</em><em> or </em><em>str</em><em>, </em><em>optional</em>) \u2013 Type of connection to use for the Runhouse\nAPI server. <em>Note: For SageMaker, only ``aws_ssm`` is currently valid as the server connection type.</em></p></li>\n<li><p><strong>ssl_keyfile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path to SSL key file to use for launching the API server with HTTPS.</p></li>\n<li><p><strong>ssl_certfile</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Path to SSL certificate file to use for launching the API server with HTTPS.</p></li>\n<li><p><strong>domain</strong> (<em>str</em><em>, </em><em>optional</em>) \u2013 Domain name for the cluster. Relevant if enabling HTTPs on the cluster.</p></li>\n<li><p><strong>den_auth</strong> (<em>bool</em><em>, </em><em>optional</em>) \u2013 Whether to use Den authorization on the server. If <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>, will validate incoming\nrequests with a Runhouse token provided in the auth headers of the request with the format:\n<code class=\"docutils literal notranslate\"><span class=\"pre\">{&quot;Authorization&quot;:</span> <span class=\"pre\">&quot;Bearer</span> <span class=\"pre\">&lt;token&gt;&quot;}</span></code>. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>).</p></li>\n<li><p><strong>dryrun</strong> (<em>bool</em>) \u2013 Whether to create the SageMakerCluster if it doesn\u2019t exist, or load a SageMakerCluster object\nas a dryrun.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns<span class=\"colon\">:</span></dt>\n<dd class=\"field-even\"><p>The resulting cluster.</p>\n</dd>\n<dt class=\"field-odd\">Return type<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster\" title=\"runhouse.SageMakerCluster\">SageMakerCluster</a></p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Launch a new SageMaker instance and keep it up indefinitely.</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Note: This will use Role ARN associated with the &quot;sagemaker&quot; profile defined in the local aws credentials</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;sm-cluster&#39;</span><span class=\"p\">,</span> <span class=\"n\">profile</span><span class=\"o\">=</span><span class=\"s2\">&quot;sagemaker&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Running a training job with a provided Estimator</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;sagemaker-cluster&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                         <span class=\"n\">estimator</span><span class=\"o\">=</span><span class=\"n\">PyTorch</span><span class=\"p\">(</span><span class=\"n\">entry_point</span><span class=\"o\">=</span><span class=\"s1\">&#39;train.py&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                                           <span class=\"n\">role</span><span class=\"o\">=</span><span class=\"s1\">&#39;arn:aws:iam::123456789012:role/MySageMakerRole&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                                           <span class=\"n\">source_dir</span><span class=\"o\">=</span><span class=\"s1\">&#39;/Users/myuser/dev/sagemaker&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                                           <span class=\"n\">framework_version</span><span class=\"o\">=</span><span class=\"s1\">&#39;1.8.1&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                                           <span class=\"n\">py_version</span><span class=\"o\">=</span><span class=\"s1\">&#39;py36&#39;</span><span class=\"p\">,</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                                           <span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s1\">&#39;ml.p3.2xlarge&#39;</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>                         <span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Load cluster from above</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">reloaded_cluster</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</section>\n<section id=\"cluster-class\">\n<h2>Cluster Class<a class=\"headerlink\" href=\"#cluster-class\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">Cluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ips</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_creds</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Dict</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">client_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_local_telemetry</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><blockquote>\n<div><dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.__init__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__init__</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ips</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_creds</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Dict</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">client_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_local_telemetry</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.__init__\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.__init__\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>The Runhouse cluster, or system. This is where you can run Functions or access/transfer data\nbetween. You can BYO (bring-your-own) cluster by providing cluster IP and ssh_creds, or\nthis can be an on-demand cluster that is spun up/down through\n<a class=\"reference external\" href=\"https://github.com/skypilot-org/skypilot\">SkyPilot</a>, using your cloud credentials.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To build a cluster, please use the factory method <a class=\"reference internal\" href=\"#runhouse.cluster\" title=\"runhouse.cluster\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">cluster()</span></code></a>.</p>\n</div>\n</dd></dl>\n\n</div></blockquote>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.add_secrets\">\n<span class=\"sig-name descname\"><span class=\"pre\">add_secrets</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider_secrets</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.add_secrets\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.add_secrets\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Copy secrets from current environment onto the cluster</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.call\">\n<span class=\"sig-name descname\"><span class=\"pre\">call</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">module_name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">method_name</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stream_logs</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">run_name</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">remote</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">run_async</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">save</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.call\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.call\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Call a method on a module that is in the cluster\u2019s object store.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>module_name</strong> (<em>str</em>) \u2013 Name of the module saved on system.</p></li>\n<li><p><strong>method_name</strong> (<em>str</em>) \u2013 Name of the method.</p></li>\n<li><p><strong>stream_logs</strong> (<em>bool</em>) \u2013 Whether to stream logs from the method call.</p></li>\n<li><p><strong>run_name</strong> (<em>str</em>) \u2013 Name for the run.</p></li>\n<li><p><strong>remote</strong> (<em>bool</em>) \u2013 Return a remote object from the function, rather than the result proper.</p></li>\n<li><p><strong>run_async</strong> (<em>bool</em>) \u2013 Run the method asynchronously and return an awaitable.</p></li>\n<li><p><strong>*args</strong> \u2013 Positional arguments to pass to the method.</p></li>\n<li><p><strong>**kwargs</strong> \u2013 Keyword arguments to pass to the method.</p></li>\n</ul>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cluster</span><span class=\"o\">.</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"s2\">&quot;my_module&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;my_method&quot;</span><span class=\"p\">,</span> <span class=\"n\">arg1</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"p\">,</span> <span class=\"n\">kwarg1</span><span class=\"o\">=</span><span class=\"n\">kwarg1</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.clear\">\n<span class=\"sig-name descname\"><span class=\"pre\">clear</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.clear\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.clear\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Clear the cluster\u2019s object store.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.delete\">\n<span class=\"sig-name descname\"><span class=\"pre\">delete</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">keys</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">None</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.delete\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.delete\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Delete the given items from the cluster\u2019s object store. To delete all items, use <cite>cluster.clear()</cite></p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.disconnect\">\n<span class=\"sig-name descname\"><span class=\"pre\">disconnect</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.disconnect\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.disconnect\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Disconnect the RPC tunnel.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cluster</span><span class=\"o\">.</span><span class=\"n\">disconnect</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.download_cert\">\n<span class=\"sig-name descname\"><span class=\"pre\">download_cert</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.download_cert\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.download_cert\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Download certificate from the cluster (Note: user must have access to the cluster)</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.enable_den_auth\">\n<span class=\"sig-name descname\"><span class=\"pre\">enable_den_auth</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">flush</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">True</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.enable_den_auth\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.enable_den_auth\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Enable Den auth on the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.endpoint\">\n<span class=\"sig-name descname\"><span class=\"pre\">endpoint</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">external</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.endpoint\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.endpoint\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Endpoint for the cluster\u2019s Daemon server. If external is True, will only return the external url,\nand will return None otherwise (e.g. if a tunnel is required). If external is False, will either return\nthe external url if it exists, or will set up the connection (based on connection_type) and return\nthe internal url (including the local connected port rather than the sever port). If cluster is not up,\nreturns None.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.get\">\n<span class=\"sig-name descname\"><span class=\"pre\">get</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">key</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">default</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Any</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">remote</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.get\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.get\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Get the result for a given key from the cluster\u2019s object store. To raise an error if the key is not found,\nuse <cite>cluster.get(key, default=KeyError)</cite>.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.install_packages\">\n<span class=\"sig-name descname\"><span class=\"pre\">install_packages</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">reqs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><a class=\"reference internal\" href=\"../package/#runhouse.Package\" title=\"runhouse.Package\"><span class=\"pre\">Package</span></a><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.install_packages\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.install_packages\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Install the given packages on the cluster.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>reqs</strong> (<em>List</em><em>[</em><a class=\"reference internal\" href=\"../package/#runhouse.Package\" title=\"runhouse.Package\"><em>Package</em></a><em> or </em><em>str</em>) \u2013 List of packages to install on cluster and env</p></li>\n<li><p><strong>env</strong> (<a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><em>Env</em></a><em> or </em><em>str</em>) \u2013 Environment to install package on. If left empty, defaults to base environment.\n(Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>)</p></li>\n</ul>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cluster</span><span class=\"o\">.</span><span class=\"n\">install_packages</span><span class=\"p\">(</span><span class=\"n\">reqs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;accelerate&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;diffusers&quot;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cluster</span><span class=\"o\">.</span><span class=\"n\">install_packages</span><span class=\"p\">(</span><span class=\"n\">reqs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;accelerate&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;diffusers&quot;</span><span class=\"p\">],</span> <span class=\"n\">env</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_conda_env&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.is_connected\">\n<span class=\"sig-name descname\"><span class=\"pre\">is_connected</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.is_connected\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.is_connected\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Whether the RPC tunnel is up.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">connected</span> <span class=\"o\">=</span> <span class=\"n\">cluster</span><span class=\"o\">.</span><span class=\"n\">is_connected</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.is_up\">\n<span class=\"sig-name descname\"><span class=\"pre\">is_up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">bool</span></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.is_up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.is_up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Check if the cluster is up.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">is_up</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.keys\">\n<span class=\"sig-name descname\"><span class=\"pre\">keys</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.keys\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.keys\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>List all keys in the cluster\u2019s object store.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.notebook\">\n<span class=\"sig-name descname\"><span class=\"pre\">notebook</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">persist</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sync_package_on_close</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">port_forward</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">8888</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.notebook\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.notebook\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Tunnel into and launch notebook from the cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;test-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">notebook</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.on_this_cluster\">\n<span class=\"sig-name descname\"><span class=\"pre\">on_this_cluster</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.on_this_cluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.on_this_cluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Whether this function is being called on the same cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.pause_autostop\">\n<span class=\"sig-name descname\"><span class=\"pre\">pause_autostop</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.pause_autostop\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.pause_autostop\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Context manager to temporarily pause autostop. Mainly for OnDemand clusters, for BYO cluster\nthere is no autostop.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.put\">\n<span class=\"sig-name descname\"><span class=\"pre\">put</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">key</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">obj</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Any</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.put\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.put\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Put the given object on the cluster\u2019s object store at the given key.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.put_resource\">\n<span class=\"sig-name descname\"><span class=\"pre\">put_resource</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">resource</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../resource/#runhouse.resources.resource.Resource\" title=\"runhouse.resources.resource.Resource\"><span class=\"pre\">Resource</span></a></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">state</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">Dict</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.put_resource\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.put_resource\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Put the given resource on the cluster\u2019s object store. Returns the key (important if name is not set).</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.remove_conda_env\">\n<span class=\"sig-name descname\"><span class=\"pre\">remove_conda_env</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"../env/#runhouse.CondaEnv\" title=\"runhouse.CondaEnv\"><span class=\"pre\">CondaEnv</span></a></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.remove_conda_env\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.remove_conda_env\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Remove conda env from the cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">remove_conda_env</span><span class=\"p\">(</span><span class=\"s2\">&quot;my_conda_env&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.rename\">\n<span class=\"sig-name descname\"><span class=\"pre\">rename</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">old_key</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">new_key</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.rename\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.rename\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Rename a key in the cluster\u2019s object store.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.restart_server\">\n<span class=\"sig-name descname\"><span class=\"pre\">restart_server</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">_rh_install_url</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">resync_rh</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">restart_ray</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">restart_proxy</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.restart_server\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.restart_server\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Restart the RPC server.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>resync_rh</strong> (<em>bool</em>) \u2013 Whether to resync runhouse. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>)</p></li>\n<li><p><strong>restart_ray</strong> (<em>bool</em>) \u2013 Whether to restart Ray. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>)</p></li>\n<li><p><strong>env</strong> (<em>str</em><em> or </em><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><em>Env</em></a><em>, </em><em>optional</em>) \u2013 Specified environment to restart the server on. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>)</p></li>\n<li><p><strong>restart_proxy</strong> (<em>bool</em>) \u2013 Whether to restart Caddy on the cluster, if configured. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n</ul>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">restart_server</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.run\">\n<span class=\"sig-name descname\"><span class=\"pre\">run</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">commands</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stream_logs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">port_forward</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">None</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">Tuple</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">,</span></span><span class=\"w\"> </span><span class=\"pre\">int</span><span class=\"p\"><span class=\"pre\">]</span></span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">require_outputs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">node</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">run_name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">list</span></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.run\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.run\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Run a list of shell commands on the cluster. If <cite>run_name</cite> is provided, the commands will be\nsent over to the cluster before being executed and a Run object will be created.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">([</span><span class=\"s2\">&quot;pip install numpy&quot;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">([</span><span class=\"s2\">&quot;pip install numpy&quot;</span><span class=\"p\">],</span> <span class=\"n\">env</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_conda_env&quot;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">([</span><span class=\"s2\">&quot;python script.py&quot;</span><span class=\"p\">],</span> <span class=\"n\">run_name</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_exp&quot;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">([</span><span class=\"s2\">&quot;python script.py&quot;</span><span class=\"p\">],</span> <span class=\"n\">node</span><span class=\"o\">=</span><span class=\"s2\">&quot;3.89.174.234&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.run_python\">\n<span class=\"sig-name descname\"><span class=\"pre\">run_python</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">commands</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stream_logs</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">node</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">port_forward</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">run_name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.run_python\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.run_python\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Run a list of python commands on the cluster, or a specific cluster node if its IP is provided.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run_python</span><span class=\"p\">([</span><span class=\"s1\">&#39;import numpy&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;print(numpy.__version__)&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run_python</span><span class=\"p\">([</span><span class=\"s2\">&quot;print(&#39;hello&#39;)&quot;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">run_python</span><span class=\"p\">([</span><span class=\"s2\">&quot;print(&#39;hello&#39;)&quot;</span><span class=\"p\">],</span> <span class=\"n\">node</span><span class=\"o\">=</span><span class=\"s2\">&quot;3.89.174.234&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Running Python commands with nested quotes can be finicky. If using nested quotes,\ntry to wrap the outer quote with double quotes (\u201d) and the inner quotes with a single quote (\u2018).</p>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.save\">\n<span class=\"sig-name descname\"><span class=\"pre\">save</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">overwrite</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.save\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.save\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Overrides the default resource save() method in order to also update\nthe cluster config on the cluster itself.</p>\n</dd></dl>\n\n<dl class=\"py property\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.server_address\">\n<em class=\"property\"><span class=\"pre\">property</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">server_address</span></span><a class=\"headerlink\" href=\"#runhouse.Cluster.server_address\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Address to use in the requests made to the cluster. If creating an SSH tunnel with the cluster,\nths will be set to localhost, otherwise will use the cluster\u2019s domain (if provided), or its\npublic IP address.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.ssh\">\n<span class=\"sig-name descname\"><span class=\"pre\">ssh</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.ssh\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.ssh\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>SSH into the cluster</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">ssh</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py property\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.ssh_creds\">\n<em class=\"property\"><span class=\"pre\">property</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">ssh_creds</span></span><a class=\"headerlink\" href=\"#runhouse.Cluster.ssh_creds\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Retrieve SSH credentials.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.status\">\n<span class=\"sig-name descname\"><span class=\"pre\">status</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">resource_address</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.status\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.status\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Loads the status of the Runhouse daemon running on the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.stop_server\">\n<span class=\"sig-name descname\"><span class=\"pre\">stop_server</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">stop_ray</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.stop_server\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.stop_server\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Stop the RPC server.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>stop_ray</strong> (<em>bool</em>) \u2013 Whether to stop Ray. (Default: <cite>True</cite>)</p></li>\n<li><p><strong>env</strong> (<em>str</em><em> or </em><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><em>Env</em></a><em>, </em><em>optional</em>) \u2013 Specified environment to stop the server on. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>)</p></li>\n</ul>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.sync_secrets\">\n<span class=\"sig-name descname\"><span class=\"pre\">sync_secrets</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">providers</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">List</span><span class=\"p\"><span class=\"pre\">[</span></span><span class=\"pre\">str</span><span class=\"p\"><span class=\"pre\">]</span></span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.sync_secrets\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.sync_secrets\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Send secrets for the given providers.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><strong>providers</strong> (<em>List</em><em>[</em><em>str</em><em>] or </em><em>None</em>) \u2013 List of providers to send secrets for.\nIf <cite>None</cite>, all providers configured in the environment will by sent.</p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">cpu</span><span class=\"o\">.</span><span class=\"n\">sync_secrets</span><span class=\"p\">(</span><span class=\"n\">secrets</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;lambda&quot;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.Cluster.up_if_not\">\n<span class=\"sig-name descname\"><span class=\"pre\">up_if_not</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/cluster/#Cluster.up_if_not\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.Cluster.up_if_not\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Bring up the cluster if it is not up. No-op if cluster is already up.\nThis only applies to on-demand clusters, and has no effect on self-managed clusters.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">up_if_not</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</dd></dl>\n\n<section id=\"cluster-hardware-setup\">\n<h3>Cluster Hardware Setup<a class=\"headerlink\" href=\"#cluster-hardware-setup\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>No additional setup is required. You will just need to have the IP address for the cluster\nand the path to SSH credentials ready to be used for the cluster initialization.</p>\n</section>\n</section>\n<section id=\"ondemandcluster-class\">\n<h2>OnDemandCluster Class<a class=\"headerlink\" href=\"#ondemandcluster-class\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>A OnDemandCluster is a cluster that uses SkyPilot functionality underneath to handle\nvarious cluster properties.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OnDemandCluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_spot</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_id</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">memory</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">disk_size</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">open_ports</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sky_state</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">live_state</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><blockquote>\n<div><dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.__init__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__init__</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">provider</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">use_spot</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_id</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">memory</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">disk_size</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">open_ports</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">sky_state</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">live_state</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.__init__\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.__init__\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>On-demand <a class=\"reference external\" href=\"https://github.com/skypilot-org/skypilot/\">SkyPilot</a> Cluster.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To build a cluster, please use the factory method <a class=\"reference internal\" href=\"#runhouse.cluster\" title=\"runhouse.cluster\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">cluster()</span></code></a>.</p>\n</div>\n</dd></dl>\n\n</div></blockquote>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.cluster_ssh_key\">\n<em class=\"property\"><span class=\"pre\">static</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">cluster_ssh_key</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">path_to_file</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.cluster_ssh_key\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.cluster_ssh_key\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Retrieve SSH key for the cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">ssh_priv_key</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">cluster_ssh_key</span><span class=\"p\">(</span><span class=\"s2\">&quot;~/.ssh/id_rsa&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.is_up\">\n<span class=\"sig-name descname\"><span class=\"pre\">is_up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">bool</span></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.is_up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.is_up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Whether the cluster is up.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">is_up</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.keep_warm\">\n<span class=\"sig-name descname\"><span class=\"pre\">keep_warm</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">-1</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.keep_warm\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.keep_warm\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Keep the cluster warm for given number of minutes after inactivity.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><strong>autostop_mins</strong> (<em>int</em>) \u2013 Amount of time (in min) to keep the cluster warm after inactivity.\nIf set to -1, keep cluster warm indefinitely. (Default: <cite>-1</cite>)</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.pause_autostop\">\n<span class=\"sig-name descname\"><span class=\"pre\">pause_autostop</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.pause_autostop\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.pause_autostop\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Context manager to temporarily pause autostop.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"o\">.</span><span class=\"n\">pause_autostop</span><span class=\"p\">():</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">([</span><span class=\"s2\">&quot;python train.py&quot;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.ssh\">\n<span class=\"sig-name descname\"><span class=\"pre\">ssh</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">node</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.ssh\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.ssh\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>SSH into the cluster. If no node is specified, will SSH onto the head node.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">ssh</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">,</span> <span class=\"n\">node</span><span class=\"o\">=</span><span class=\"s2\">&quot;3.89.174.234&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">ssh</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py property\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.ssh_creds\">\n<em class=\"property\"><span class=\"pre\">property</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">ssh_creds</span></span><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.ssh_creds\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Retrieve SSH creds for the cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">credentials</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">ssh_creds</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.teardown\">\n<span class=\"sig-name descname\"><span class=\"pre\">teardown</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.teardown\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.teardown\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Teardown cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">teardown</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.teardown_and_delete\">\n<span class=\"sig-name descname\"><span class=\"pre\">teardown_and_delete</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.teardown_and_delete\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.teardown_and_delete\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Teardown cluster and delete it from configs.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">teardown_and_delete</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.OnDemandCluster.up\">\n<span class=\"sig-name descname\"><span class=\"pre\">up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/on_demand_cluster/#OnDemandCluster.up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.OnDemandCluster.up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Up the cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;rh-cpu&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">up</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</dd></dl>\n\n<section id=\"ondemandcluster-hardware-setup\">\n<h3>OnDemandCluster Hardware Setup<a class=\"headerlink\" href=\"#ondemandcluster-hardware-setup\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>On-Demand clusters use SkyPilot to automatically spin up and down clusters on the cloud. You will\nneed to first set up cloud access on your local machine:</p>\n<p>Run <code class=\"docutils literal notranslate\"><span class=\"pre\">sky</span> <span class=\"pre\">check</span></code> to see which cloud providers are enabled, and how to set up cloud credentials for each of the\nproviders.</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>sky check\n</pre></div>\n</div>\n<p>For a more in depth tutorial on setting up individual cloud credentials, you can refer to\n<a class=\"reference external\" href=\"https://skypilot.readthedocs.io/en/latest/getting-started/installation.html#cloud-account-setup\">SkyPilot setup docs</a>.</p>\n</section>\n</section>\n<section id=\"sagemakercluster-class\">\n<h2>SageMakerCluster Class<a class=\"headerlink\" href=\"#sagemakercluster-class\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>SageMaker support is an alpha and under active development. Please report any bugs or let us know of any\nfeature requests.</p>\n</div>\n<p>A SageMakerCluster is a cluster that uses a SageMaker instance under the hood.</p>\n<p>Runhouse currently supports two core usage paths for SageMaker clusters:</p>\n<ul class=\"simple\">\n<li><p><strong>Compute backend</strong>: You can use SageMaker as a compute backend, just as you would a\n<a class=\"reference internal\" href=\"#cluster-class\"><span class=\"std std-ref\">BYO (bring-your-own)</span></a> or an <a class=\"reference internal\" href=\"#ondemandcluster-class\"><span class=\"std std-ref\">on-demand cluster</span></a>.\nRunhouse will handle launching the SageMaker compute and creating the SSH connection\nto the cluster.</p></li>\n<li><p><strong>Dedicated training jobs</strong>: You can use a SageMakerCluster class to run a training job on SageMaker compute.\nTo do so, you will need to provide an\n<a class=\"reference external\" href=\"https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html\">estimator</a>.</p></li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Runhouse requires an AWS IAM role (either name or full ARN) whose credentials have adequate permissions to\ncreate create SageMaker endpoints and access AWS resources.</p>\n<p>Please see <a class=\"reference internal\" href=\"#sagemaker-hardware-setup\"><span class=\"std std-ref\">SageMaker Hardware Setup</span></a> for more specific instructions and\nrequirements for providing the role and setting up the cluster.</p>\n</div>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">runhouse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">SageMakerCluster</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">role</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">profile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_key_path</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_id</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_uri</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">connection_wait_time</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">estimator</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">EstimatorBase</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">Dict</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">job_name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><blockquote>\n<div><dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.__init__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__init__</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">role</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">profile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">region</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssh_key_path</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_id</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">num_instances</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">image_uri</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">connection_wait_time</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">estimator</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">EstimatorBase</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">Dict</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">job_name</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_host</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_port</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">domain</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">server_connection_type</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_keyfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">ssl_certfile</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><span class=\"pre\">None</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">den_auth</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dryrun</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.__init__\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.__init__\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>The Runhouse SageMaker cluster abstraction. This is where you can use SageMaker as a compute backend, just as\nyou would an on-demand cluster (i.e. cloud VMs) or a BYO (i.e. on-prem) cluster. Additionally supports running\ndedicated training jobs using SageMaker Estimators.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To build a cluster, please use the factory method <a class=\"reference internal\" href=\"#runhouse.sagemaker_cluster\" title=\"runhouse.sagemaker_cluster\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">sagemaker_cluster()</span></code></a>.</p>\n</div>\n</dd></dl>\n\n</div></blockquote>\n<dl class=\"py property\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.connection_wait_time\">\n<em class=\"property\"><span class=\"pre\">property</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">connection_wait_time</span></span><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.connection_wait_time\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Amount of time the SSH helper will wait inside SageMaker before it continues normal execution</p>\n</dd></dl>\n\n<dl class=\"py property\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.default_bucket\">\n<em class=\"property\"><span class=\"pre\">property</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">default_bucket</span></span><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.default_bucket\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Default bucket to use for storing the cluster\u2019s authorized public keys.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.is_up\">\n<span class=\"sig-name descname\"><span class=\"pre\">is_up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">bool</span></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.is_up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.is_up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Check if the cluster is up.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">is_up</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.keep_warm\">\n<span class=\"sig-name descname\"><span class=\"pre\">keep_warm</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autostop_mins</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">int</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">-1</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.keep_warm\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.keep_warm\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Keep the cluster warm for given number of minutes after inactivity.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><strong>autostop_mins</strong> (<em>int</em>) \u2013 Amount of time (in minutes) to keep the cluster warm after inactivity.\nIf set to <code class=\"docutils literal notranslate\"><span class=\"pre\">-1</span></code>, keep cluster warm indefinitely. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">-1</span></code>)</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.pause_autostop\">\n<span class=\"sig-name descname\"><span class=\"pre\">pause_autostop</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.pause_autostop\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.pause_autostop\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Context manager to temporarily pause autostop.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.restart_server\">\n<span class=\"sig-name descname\"><span class=\"pre\">restart_server</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">_rh_install_url</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">resync_rh</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">restart_ray</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">env</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">str</span><span class=\"w\"> </span><span class=\"p\"><span class=\"pre\">|</span></span><span class=\"w\"> </span><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><span class=\"pre\">Env</span></a></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">restart_proxy</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.restart_server\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.restart_server\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Restart the RPC server on the SageMaker instance.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>resync_rh</strong> (<em>bool</em>) \u2013 Whether to resync runhouse. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>)</p></li>\n<li><p><strong>restart_ray</strong> (<em>bool</em>) \u2013 Whether to restart Ray. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>)</p></li>\n<li><p><strong>env</strong> (<em>str</em><em> or </em><a class=\"reference internal\" href=\"../env/#runhouse.Env\" title=\"runhouse.Env\"><em>Env</em></a>) \u2013 Env to restart the server from. If not provided\nwill use default env on the cluster.</p></li>\n<li><p><strong>restart_proxy</strong> (<em>bool</em>) \u2013 Whether to restart nginx on the cluster, if configured. (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>)</p></li>\n</ul>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">restart_server</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.ssh\">\n<span class=\"sig-name descname\"><span class=\"pre\">ssh</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">interactive</span></span><span class=\"p\"><span class=\"pre\">:</span></span><span class=\"w\"> </span><span class=\"n\"><span class=\"pre\">bool</span></span><span class=\"w\"> </span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"w\"> </span><span class=\"default_value\"><span class=\"pre\">True</span></span></em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.ssh\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.ssh\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>SSH into the cluster.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters<span class=\"colon\">:</span></dt>\n<dd class=\"field-odd\"><p><strong>interactive</strong> (<em>bool</em>) \u2013 Whether to start an interactive shell or not (Default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>).</p>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">ssh</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py property\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.ssh_key_path\">\n<em class=\"property\"><span class=\"pre\">property</span><span class=\"w\"> </span></em><span class=\"sig-name descname\"><span class=\"pre\">ssh_key_path</span></span><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.ssh_key_path\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Relative path to the private SSH key used to connect to the cluster.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.status\">\n<span class=\"sig-name descname\"><span class=\"pre\">status</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">&#x2192;</span> <span class=\"sig-return-typehint\"><span class=\"pre\">dict</span></span></span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.status\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.status\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Get status of SageMaker cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">status</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">status</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.teardown\">\n<span class=\"sig-name descname\"><span class=\"pre\">teardown</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.teardown\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.teardown\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Teardown the SageMaker instance.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">teardown</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.teardown_and_delete\">\n<span class=\"sig-name descname\"><span class=\"pre\">teardown_and_delete</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.teardown_and_delete\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.teardown_and_delete\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Teardown the SageMaker instance and delete from RNS configs.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">teardown_and_delete</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.up\">\n<span class=\"sig-name descname\"><span class=\"pre\">up</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.up\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.up\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Up the cluster.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">up</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"runhouse.SageMakerCluster.up_if_not\">\n<span class=\"sig-name descname\"><span class=\"pre\">up_if_not</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../_modules/runhouse/resources/hardware/sagemaker/sagemaker_cluster/#SageMakerCluster.up_if_not\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#runhouse.SageMakerCluster.up_if_not\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Bring up the cluster if it is not up. No-op if cluster is already up.</p>\n<p class=\"rubric\">Example</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">sagemaker_cluster</span><span class=\"p\">(</span><span class=\"s2\">&quot;sagemaker-cluster&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">up_if_not</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</dd></dl>\n\n<section id=\"sagemaker-hardware-setup\">\n<h3>SageMaker Hardware Setup<a class=\"headerlink\" href=\"#sagemaker-hardware-setup\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<section id=\"iam-role\">\n<h4>IAM Role<a class=\"headerlink\" href=\"#iam-role\" title=\"Permalink to this heading\">\u00b6</a></h4>\n<p>SageMaker clusters require <a class=\"reference external\" href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html\">AWS CLI V2</a> and\nconfiguring the SageMaker IAM role with the\n<a class=\"reference external\" href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/ssm-agent.html\">AWS Systems Manager</a>.</p>\n<p>In order to launch a cluster, you must grant SageMaker the necessary permissions with an IAM role, which\ncan be provided either by name or by full ARN. You can also specify a profile explicitly or\nwith the <code class=\"code docutils literal notranslate\"><span class=\"pre\">AWS_PROFILE</span></code> environment variable.</p>\n<p>For example, let\u2019s say your local <code class=\"code docutils literal notranslate\"><span class=\"pre\">~/.aws/config</span></code> file contains:</p>\n<div class=\"highlight-ini notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">[profile sagemaker]</span>\n<span class=\"na\">role_arn</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">arn:aws:iam::123456789:role/service-role/AmazonSageMaker-ExecutionRole-20230717T192142</span>\n<span class=\"na\">region</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">us-east-1</span>\n<span class=\"na\">source_profile</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">default</span>\n</pre></div>\n</div>\n<p>There are several ways to provide the necessary credentials when <span class=\"xref std std-ref\">initializing the cluster</span>:</p>\n<ul class=\"simple\">\n<li><p>Providing the AWS profile name: <code class=\"code docutils literal notranslate\"><span class=\"pre\">profile=&quot;sagemaker&quot;</span></code></p></li>\n<li><p>Providing the AWS Role ARN directly: <code class=\"code docutils literal notranslate\"><span class=\"pre\">role=&quot;arn:aws:iam::123456789:role/service-role/AmazonSageMaker-ExecutionRole-20230717T192142&quot;</span></code></p></li>\n<li><p>Environment Variable: setting <code class=\"code docutils literal notranslate\"><span class=\"pre\">AWS_PROFILE</span></code> to <code class=\"code docutils literal notranslate\"><span class=\"pre\">&quot;sagemaker&quot;</span></code></p></li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>If no role or profile is provided, Runhouse will try using the <code class=\"code docutils literal notranslate\"><span class=\"pre\">default</span></code> profile. Note if this default AWS\nidentity is not a role, then you will need to provide the <code class=\"code docutils literal notranslate\"><span class=\"pre\">role</span></code> or <code class=\"code docutils literal notranslate\"><span class=\"pre\">profile</span></code> explicitly.</p>\n</div>\n<div class=\"admonition tip\">\n<p class=\"admonition-title\">Tip</p>\n<p>If you are providing an estimator, you must provide the role ARN explicitly as part of the estimator object.\nMore info on estimators <a class=\"reference external\" href=\"https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html\">here</a>.</p>\n</div>\n<p>Please see the <a class=\"reference external\" href=\"https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html\">AWS docs</a> for further\ninstructions on creating and configuring an ARN Role.</p>\n</section>\n<section id=\"id9\">\n<h4>AWS CLI V2<a class=\"headerlink\" href=\"#id9\" title=\"Permalink to this heading\">\u00b6</a></h4>\n<p>The SageMaker SDK uses AWS CLI V2, which must be installed on your local machine. Doing so requires one of two steps:</p>\n<ul class=\"simple\">\n<li><p><a class=\"reference external\" href=\"https://docs.aws.amazon.com/cli/latest/userguide/cliv2-migration-instructions.html#cliv2-migration-instructions-migrate\">Migrate from V1 to V2</a></p></li>\n<li><p><a class=\"reference external\" href=\"https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html\">Install V2</a></p></li>\n</ul>\n<p>To confirm the installation succeeded, run <code class=\"docutils literal notranslate\"><span class=\"pre\">aws</span> <span class=\"pre\">--version</span></code> in the command line. You should see something like:</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>aws-cli/2.13.8 Python/3.11.4 Darwin/21.3.0 source/arm64 prompt/off\n</pre></div>\n</div>\n<p>If you are still seeing the V1 version, first try uninstalling V1 in case it is still present\n(e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">pip</span> <span class=\"pre\">uninstall</span> <span class=\"pre\">awscli</span></code>).</p>\n<p>You may also need to add the V2 executable to the PATH of your python environment. For example, if you are using conda,\nit\u2019s possible the conda env will try using its own version of the AWS CLI located at a different\npath (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">/opt/homebrew/anaconda3/bin/aws</span></code>), while the system wide installation of AWS CLI is located somewhere\nelse (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">/opt/homebrew/bin/aws</span></code>).</p>\n<p>To find the global AWS CLI path:</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>which aws\n</pre></div>\n</div>\n<p>To ensure that the global AWS CLI version is used within your python environment, you\u2019ll need to adjust the\nPATH environment variable so that it prioritizes the global AWS CLI path.</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>export PATH=/opt/homebrew/bin:$PATH\n</pre></div>\n</div>\n</section>\n<section id=\"ssm-setup\">\n<h4>SSM Setup<a class=\"headerlink\" href=\"#ssm-setup\" title=\"Permalink to this heading\">\u00b6</a></h4>\n<p>The AWS Systems Manager service is used to create SSH tunnels with the SageMaker cluster.</p>\n<p>To install the AWS Session Manager Plugin, please see the <a class=\"reference external\" href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html\">AWS docs</a>\nor <a class=\"reference external\" href=\"https://github.com/aws-samples/sagemaker-ssh-helper#step-4-connect-over-ssm\">SageMaker SSH Helper</a>. The SSH Helper package\nsimplifies the process of creating SSH tunnels with SageMaker clusters. It is installed by default if\nyou are installing Runhouse with the SageMaker dependency: <code class=\"code docutils literal notranslate\"><span class=\"pre\">pip</span> <span class=\"pre\">install</span> <span class=\"pre\">runhouse[sagemaker]</span></code>.</p>\n<p>You can also install the Session Manager by running the CLI command:</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>sm-local-configure\n</pre></div>\n</div>\n<p>To configure your SageMaker IAM role with the AWS Systems Manager, please\nrefer to <a class=\"reference external\" href=\"https://github.com/aws-samples/sagemaker-ssh-helper/blob/main/IAM_SSM_Setup.md\">these instructions</a>.</p>\n</section>\n</section>\n</section>\n<section id=\"cluster-authentication-verification\">\n<h2>Cluster Authentication &amp; Verification<a class=\"headerlink\" href=\"#cluster-authentication-verification\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>Runhouse provides a couple of options to manage the connection to the Runhouse API server running on a cluster.</p>\n<section id=\"server-connection\">\n<h3>Server Connection<a class=\"headerlink\" href=\"#server-connection\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>The below options can be specified with the <code class=\"docutils literal notranslate\"><span class=\"pre\">server_connection_type</span></code> parameter\nwhen <span class=\"xref std std-ref\">initializing a cluster</span>. By default the Runhouse API server will\nbe started on the cluster on port <code class=\"code docutils literal notranslate\"><span class=\"pre\">32300</span></code>.</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">ssh</span></code>: Connects to the cluster via an SSH tunnel, by default on port <code class=\"code docutils literal notranslate\"><span class=\"pre\">32300</span></code>.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code>: Connects to the cluster via HTTPS (by default on port <code class=\"code docutils literal notranslate\"><span class=\"pre\">443</span></code>) using either a provided certificate, or\ncreating a new self-signed certificate just for this cluster. You must open the needed ports in the firewall, such\nas via the open_ports argument in the OnDemandCluster, or manually in the compute itself or cloud console.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code>: Does not use any port forwarding or enforce any authentication. Connects to the cluster with HTTP by\ndefault on port <code class=\"code docutils literal notranslate\"><span class=\"pre\">80</span></code>. This is useful when connecting to a cluster within a VPC, or creating a tunnel manually\non the side with custom settings.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">aws_ssm</span></code>: Uses the\n<a class=\"reference external\" href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/what-is-systems-manager.html\">AWS Systems Manager</a> to\ncreate an SSH tunnel to the cluster, by default on port <code class=\"code docutils literal notranslate\"><span class=\"pre\">32300</span></code>. <em>Note: this is currently only relevant\nfor SageMaker Clusters.</em></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">paramiko</span></code>: Uses <a class=\"reference external\" href=\"https://www.paramiko.org/\">Paramiko</a> to create an SSH tunnel to the cluster. This\nis relevant if you are using a cluster which requires a password to authenticate.</p></li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> connection type is the most secure and is recommended for production use if you are not running inside\nof a VPC. However, be mindful that you must secure the cluster with authentication (see below) if you open it\nto the public internet.</p>\n</div>\n</section>\n<section id=\"server-authentication\">\n<h3>Server Authentication<a class=\"headerlink\" href=\"#server-authentication\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>If desired, Runhouse provides out-of-the-box authentication via users\u2019 Runhouse token (generated when\n<a class=\"reference internal\" href=\"../login/#login-logout\"><span class=\"std std-ref\">logging in</span></a>) and set locally at: <code class=\"code docutils literal notranslate\"><span class=\"pre\">~/.rh/config.yaml</span></code>). This is crucial if the cluster\nhas ports open to the public internet, as would usually be the case when using the <code class=\"docutils literal notranslate\"><span class=\"pre\">tls</span></code> connection type. You may\nalso set up your own authentication manually inside of your own code, but you should likely still enable Runhouse\nauthentication to ensure that even your non-user-facing endpoints into the server are secured.</p>\n<p>When <span class=\"xref std std-ref\">initializing a cluster</span>, you can set the <code class=\"code docutils literal notranslate\"><span class=\"pre\">den_auth</span></code> parameter to <code class=\"code docutils literal notranslate\"><span class=\"pre\">True</span></code>\nto enable token authentication. Calls to the cluster server can then be made using an auth header with the\nformat: <code class=\"code docutils literal notranslate\"><span class=\"pre\">{&quot;Authorization&quot;:</span> <span class=\"pre\">&quot;Bearer</span> <span class=\"pre\">&lt;cluster-token&gt;&quot;}</span></code>. The Runhouse Python library adds this header to its calls\nautomatically, so your users do not need to worry about it after logging into Runhouse.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Runhouse never uses your default Runhouse token for anything other than requests made to\n<a class=\"reference external\" href=\"https://www.run.house/dashboard\">Runhouse Den</a>. Your token will never be exposed or shared with anyone else.</p>\n</div>\n<section id=\"tls-certificates\">\n<h4>TLS Certificates<a class=\"headerlink\" href=\"#tls-certificates\" title=\"Permalink to this heading\">\u00b6</a></h4>\n<p>Enabling TLS and <a class=\"reference external\" href=\"https://www.run.house/dashboard\">Runhouse Den Dashboard</a> Auth for the API server makes it incredibly\nfast and easy to stand up a microservice with standard token authentication, allowing you to easily share Runhouse\nresources with collaborators, teams, customers, etc.</p>\n<p>Let\u2019s illustrate this with a simple example:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">concat</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">a</span> <span class=\"o\">+</span> <span class=\"n\">b</span>\n\n<span class=\"c1\"># Launch a cluster with TLS and Den Auth enabled</span>\n<span class=\"n\">cpu</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;m5.xlarge&quot;</span><span class=\"p\">,</span>\n                          <span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">,</span>\n                          <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;rh-cluster&quot;</span><span class=\"p\">,</span>\n                          <span class=\"n\">den_auth</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                          <span class=\"n\">open_ports</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">443</span><span class=\"p\">],</span>\n                          <span class=\"n\">server_connection_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;tls&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">up_if_not</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># Remote function stub which lives on the cluster</span>\n<span class=\"n\">remote_func</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">concat</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">(</span><span class=\"n\">cpu</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Save to Runhouse Den</span>\n<span class=\"n\">remote_func</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># Give read access to the function to another user - this will allow them to call this service remotely</span>\n<span class=\"c1\"># and view the function metadata in Runhouse Den</span>\n<span class=\"n\">remote_func</span><span class=\"o\">.</span><span class=\"n\">share</span><span class=\"p\">(</span><span class=\"s2\">&quot;user1@gmail.com&quot;</span><span class=\"p\">,</span> <span class=\"n\">access_level</span><span class=\"o\">=</span><span class=\"s2\">&quot;read&quot;</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># User1 can then call the function from any environment</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">remote_func</span><span class=\"p\">(</span><span class=\"s2\">&quot;run&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;house&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>We can also call the function via an HTTP request, making it easy for other users to call the function with\na Runhouse cluster token (Note: this assumes the user has been granted access to the function or\nwrite access to the cluster):</p>\n<div class=\"highlight-cli notranslate\"><div class=\"highlight\"><pre><span></span>curl -X GET &quot;https://&lt;DOMAIN&gt;/concat/call?a=run&amp;b=house&quot;\n-H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer &lt;CLUSTER-TOKEN&gt;&quot;\n</pre></div>\n</div>\n</section>\n<section id=\"caddy\">\n<h4>Caddy<a class=\"headerlink\" href=\"#caddy\" title=\"Permalink to this heading\">\u00b6</a></h4>\n<p>Runhouse gives you the option of using <a class=\"reference external\" href=\"https://caddyserver.com/\">Caddy</a> as a reverse proxy for the Runhouse API\nserver, which is a FastAPI app launched with <a class=\"reference external\" href=\"https://www.uvicorn.org/\">Uvicorn</a>. Using Caddy provides you with a\nsafer and more conventional approach running the FastAPI app on a higher, non-privileged port (such as 32300, the\ndefault Runhouse port) and then use Caddy as a reverse proxy to forward requests from the HTTP port (default: 80) or\nthe HTTPS port (default: 443).</p>\n<p>Caddy also enables generating and auto-renewing self-signed certificates, making it easy to secure your cluster with\nHTTPS right out of the box.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Caddy is enabled by default when you launch a cluster with the <code class=\"code docutils literal notranslate\"><span class=\"pre\">server_port</span></code> set to either 80 or 443.</p>\n</div>\n<p><strong>Generating Certs</strong></p>\n<p>Runhouse offers two options for enabling TLS/SSL on a cluster with Caddy:</p>\n<ol class=\"arabic simple\">\n<li><p><em>Using existing certs</em>: provide the path to the cert and key files with the <code class=\"code docutils literal notranslate\"><span class=\"pre\">ssl_certfile</span></code> and\n<code class=\"code docutils literal notranslate\"><span class=\"pre\">ssl_keyfile</span></code> arguments. These certs will be used by Caddy as specified in the Caddyfile on the cluster.\nIf no cert paths are provided and no domain is specified, Runhouse will issue\nself-signed certificates to use for the cluster. These certs will not be verified by a CA.</p></li>\n<li><p><em>Using Caddy to generate CA verified certs</em>: Provide the <code class=\"code docutils literal notranslate\"><span class=\"pre\">domain</span></code> argument. Caddy will then obtain\ncertificates from Let\u2019s Encrypt on-demand when a client connects for the first time.</p></li>\n</ol>\n</section>\n</section>\n</section>\n</section>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            name: \"python3\",\n            path: \"./api/python\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["api/python/env", "Env", "N", "next"], ["api/python/function", "Function", "P", "previous"]], "sourcename": "api/python/cluster.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Cluster</a><ul>\n<li><a class=\"reference internal\" href=\"#cluster-factory-methods\">Cluster Factory Methods</a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.cluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">cluster()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.ondemand_cluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">ondemand_cluster()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.sagemaker_cluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">sagemaker_cluster()</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#cluster-class\">Cluster Class</a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.__init__\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.__init__()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.add_secrets\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.add_secrets()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.call\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.call()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.clear\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.clear()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.delete\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.delete()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.disconnect\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.disconnect()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.download_cert\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.download_cert()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.enable_den_auth\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.enable_den_auth()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.endpoint\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.endpoint()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.get\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.get()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.install_packages\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.install_packages()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.is_connected\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.is_connected()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.is_up\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.is_up()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.keys\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.keys()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.notebook\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.notebook()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.on_this_cluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.on_this_cluster()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.pause_autostop\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.pause_autostop()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.put\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.put()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.put_resource\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.put_resource()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.remove_conda_env\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.remove_conda_env()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.rename\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.rename()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.restart_server\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.restart_server()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.run\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.run()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.run_python\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.run_python()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.save\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.save()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.server_address\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.server_address</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.ssh\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.ssh()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.ssh_creds\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.ssh_creds</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.status\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.status()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.stop_server\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.stop_server()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.sync_secrets\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.sync_secrets()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.Cluster.up_if_not\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Cluster.up_if_not()</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#cluster-hardware-setup\">Cluster Hardware Setup</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#ondemandcluster-class\">OnDemandCluster Class</a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.__init__\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.__init__()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.cluster_ssh_key\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.cluster_ssh_key()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.is_up\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.is_up()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.keep_warm\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.keep_warm()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.pause_autostop\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.pause_autostop()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.ssh\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.ssh()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.ssh_creds\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.ssh_creds</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.teardown\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.teardown()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.teardown_and_delete\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.teardown_and_delete()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.OnDemandCluster.up\"><code class=\"docutils literal notranslate\"><span class=\"pre\">OnDemandCluster.up()</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#ondemandcluster-hardware-setup\">OnDemandCluster Hardware Setup</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#sagemakercluster-class\">SageMakerCluster Class</a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.__init__\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.__init__()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.connection_wait_time\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.connection_wait_time</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.default_bucket\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.default_bucket</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.is_up\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.is_up()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.keep_warm\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.keep_warm()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.pause_autostop\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.pause_autostop()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.restart_server\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.restart_server()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.ssh\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.ssh()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.ssh_key_path\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.ssh_key_path</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.status\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.status()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.teardown\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.teardown()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.teardown_and_delete\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.teardown_and_delete()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.up\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.up()</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#runhouse.SageMakerCluster.up_if_not\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SageMakerCluster.up_if_not()</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#sagemaker-hardware-setup\">SageMaker Hardware Setup</a><ul>\n<li><a class=\"reference internal\" href=\"#iam-role\">IAM Role</a></li>\n<li><a class=\"reference internal\" href=\"#id9\">AWS CLI V2</a></li>\n<li><a class=\"reference internal\" href=\"#ssm-setup\">SSM Setup</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#cluster-authentication-verification\">Cluster Authentication &amp; Verification</a><ul>\n<li><a class=\"reference internal\" href=\"#server-connection\">Server Connection</a></li>\n<li><a class=\"reference internal\" href=\"#server-authentication\">Server Authentication</a><ul>\n<li><a class=\"reference internal\" href=\"#tls-certificates\">TLS Certificates</a></li>\n<li><a class=\"reference internal\" href=\"#caddy\">Caddy</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "globaltoc": "<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Getting Started</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/api/quick_start/\">Getting Started</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"architecture/\">Architecture Overview</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api_tutorials/\">API Tutorials</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/compute/\">Compute: Clusters, Functions &amp; Modules, Packages &amp; Envs</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/data/\">Data: Folders, Tables, &amp; Blobs</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/secrets/\">Secrets Management</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/resources/\">Resource Management</a></li>\n</ul>\n</li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API Reference</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/python/\">Python API</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/resource/\">Resource</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/function/\">Function</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/cluster/\">Cluster</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/env/\">Env</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/package/\">Package</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/module/\">Module</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/mapper/\">Mapper</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/folder/\">Folder</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/table/\">Table</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/blob/\">Blob</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/file/\">File</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/secrets/\">Secrets</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/login/\">Login/Logout</a></li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/cli/\">Command Line Interface</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Usage Examples</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/inference/\">Inference: Stable Diffusion and FLAN-T5</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/training/\">Training: Transformers</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/distributed/\">Distributed: HF Accelerate</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/funhouse/tree/main/bert_pipeline\">Pipelining: BERT</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Additional Resources</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"debugging_logging/\">Debugging and Logging</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"troubleshooting/\">Manual Setup and Troubleshooting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"security_and_authentication/\">Security and Authentication</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/runhouse\">Source Code</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://api.run.house/docs\">REST API Guide</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://www.run.house/dashboard\">Runhouse Den Dashboard</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/funhouse\">Funhouse</a></li>\n</ul>\n", "current_page_name": "api/python/cluster", "sidebars": ["about.html", "navigation.html", "relations.html", "searchbox.html", "donate.html"], "customsidebar": null, "alabaster_version": "0.7.16", "alabaster_version_info": [0, 7, 16]}