{"parents": [{"link": "../../../api_tutorials/", "title": "API Tutorials"}], "prev": {"link": "../accessibility/", "title": "Accessibility"}, "next": {"link": "../../../api/python/", "title": "Python API"}, "title": "Secrets Management", "meta": {}, "body": "<div class=\"section\" id=\"secrets-management\">\n<h1>Secrets Management<a class=\"headerlink\" href=\"#secrets-management\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"saving-secrets\">\n<h2>Saving Secrets<a class=\"headerlink\" href=\"#saving-secrets\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>There are a few ways to save secrets to Runhouse to make them available conveniently across environments.</p>\n<p>If your secrets are saved into your local environment (e.g. <code class=\"code docutils literal notranslate\"><span class=\"pre\">~/.aws/...</span></code>), the fastest way to save them is to run\n<code class=\"code docutils literal notranslate\"><span class=\"pre\">runhouse</span> <span class=\"pre\">login</span></code> in your command line (or <code class=\"code docutils literal notranslate\"><span class=\"pre\">runhouse.login()</span></code> in a Python interpreter), which will prompt\nyou for your Runhouse token and ask if you\u2019d like to upload secrets. It will then extract secrets from your environment\nand upload them to Vault. Alternatively, you can run:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">extract_and_upload</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>To add locally stored secrets for a specific provider (AWS, Azure, GCP):</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">(</span><span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>To add secrets for a custom provider or those not stored in local config files, use:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">(</span><span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s2\">&quot;snowflake&quot;</span><span class=\"p\">,</span> <span class=\"n\">secret</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;private_key&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;************&quot;</span><span class=\"p\">})</span>\n</pre></div>\n</div>\n<p>These will not be automatically loaded into new environments via <code class=\"code docutils literal notranslate\"><span class=\"pre\">runhouse</span> <span class=\"pre\">login</span></code>, but can be accessed in code via\n<code class=\"code docutils literal notranslate\"><span class=\"pre\">rh.Secrets.get(provider=&quot;snowflake&quot;)</span></code>.</p>\n</div>\n<div class=\"section\" id=\"loading-secrets\">\n<h2>Loading Secrets<a class=\"headerlink\" href=\"#loading-secrets\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To load secrets into your environment, you can run <code class=\"code docutils literal notranslate\"><span class=\"pre\">runhouse</span> <span class=\"pre\">login</span></code> or <code class=\"code docutils literal notranslate\"><span class=\"pre\">rh.login()</span></code> in your command line or Python\ninterpreter. This will prompt you for your Runhouse token and download secrets from Vault. Alternatively, you can run:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">download_into_env</span><span class=\"p\">()</span>\n<span class=\"c1\"># or</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">download_into_env</span><span class=\"p\">(</span><span class=\"n\">providers</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;azure&quot;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n<p>To get secrets for a specific provider:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_creds</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"deleting-secrets\">\n<h2>Deleting Secrets<a class=\"headerlink\" href=\"#deleting-secrets\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To delete secrets from Vault for a list of providers:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">providers</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;huggingface&quot;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n<p>You can also delete your secrets stored in Vault directly from the\nManagement UI <a class=\"reference external\" href=\"www.run.house/user/secrets/\">Secrets page</a>.</p>\n</div>\n</div>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            kernelName: \"python3\",\n            path: \"./tutorials/api\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["api/python", "Python API", "N", "next"], ["tutorials/api/accessibility", "Accessibility", "P", "previous"]], "sourcename": "tutorials/api/secrets_management.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Secrets Management</a><ul>\n<li><a class=\"reference internal\" href=\"#saving-secrets\">Saving Secrets</a></li>\n<li><a class=\"reference internal\" href=\"#loading-secrets\">Loading Secrets</a></li>\n<li><a class=\"reference internal\" href=\"#deleting-secrets\">Deleting Secrets</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "tutorials/api/secrets_management", "sidebars": ["sidebar-logo.html", "search-field.html", "sbt-sidebar-nav.html", "sbt-sidebar-footer.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "pagetitle": "Secrets Management", "page_description": "Secrets Management  Saving Secrets  There are a few ways to save secrets to Runhouse to make them available conveniently across environments.  If your secrets a", "author": "the Runhouse team \ud83c\udfc3\u200d\u2640\ufe0f\ud83c\udfe0", "github_user": "run-house", "github_repo": "runhouse", "github_version": "stable", "doc_path": "docs/", "theme_search_bar_text": "Search the docs ...", "theme_show_toc_level": 1}