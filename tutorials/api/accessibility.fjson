{"parents": [{"link": "../../../api_tutorials/", "title": "API Tutorials"}], "prev": {"link": "../data/", "title": "Data: Folders, Tables, &amp; Blobs"}, "next": {"link": "../../../api/python/", "title": "Python API"}, "title": "Accessibility: Resource and Secrets Management", "meta": {}, "body": "<section id=\"accessibility-resource-and-secrets-management\">\n<h1>Accessibility: Resource and Secrets Management<a class=\"headerlink\" href=\"#accessibility-resource-and-secrets-management\" title=\"Permalink to this heading\">\u00b6</a></h1>\n<p><a href=\"https://colab.research.google.com/github/run-house/runhouse/blob/stable/docs/notebooks/basics/accessibility.ipynb\">\n<img src=\"https://colab.research.google.com/assets/colab-badge.svg\" alt=\"Open In Colab\"/></a></p><p>Runhouse provides a suite of accessibility features that makes it easy\nto keep track of and access your data, code, or secrets from anywhere.\nThe Runhouse RNS (resource naming system) keeps track of lightweight\nmetadata for your Resources, making it possible to save, reload, and\nreuse them.</p>\n<p>Anyone can take advantage of these accessibility features locally, and\nby creating a (free) Runhouse account, you can further access your\nresources and secrets from any environment or device you log into.</p>\n<p>This tutorial covers the following topics:</p>\n<ol class=\"arabic simple\">\n<li><p>Secrets (Credentials) Management</p></li>\n<li><p>Configs</p></li>\n<li><p>Local RNS</p></li>\n<li><p>Runhouse RNS</p></li>\n</ol>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">runhouse</span> <span class=\"k\">as</span> <span class=\"nn\">rh</span>\n</pre></div>\n</div>\n<section id=\"secrets-management\">\n<h2>Secrets Management<a class=\"headerlink\" href=\"#secrets-management\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>The Secrets API provides a simple interface for storing and retrieving\nsecrets to a allow a more seamless experience when accessing resources\nacross environments. It provides a simple interface for storing and\nretrieving secrets from a variety of providers (e.g.\u00a0AWS, Azure, GCP,\nHugging Face, Github, etc.) as well as SSH Keys and custom secrets, and\nstores them in Hashicorp Vault (and never on Runhouse servers).</p>\n<p>The\n<a class=\"reference external\" href=\"https://www.run.house/docs/api/python/secrets\">API</a>\nhandles secrets interactions between</p>\n<ul class=\"simple\">\n<li><p>config files</p></li>\n<li><p>environment variables</p></li>\n<li><p>Python variables</p></li>\n<li><p>Vault</p></li>\n</ul>\n<p>To use secrets locally without creating account, you can use\n<code class=\"docutils literal notranslate\"><span class=\"pre\">rh.Secrets.save_provider_secrets()</span></code> to properly sync down your\ncredentials into the proper local default paths expected by Runhouse, to\nperform operations such as launching your cloud clusters.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">save_provider_secrets</span><span class=\"p\">(</span><span class=\"n\">secrets</span><span class=\"o\">=</span><span class=\"p\">{</span>\n    <span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;access_key&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;******&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;secret_key&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;*******&quot;</span><span class=\"p\">},</span>\n    <span class=\"s2\">&quot;lambda&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;api_key&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;******&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</pre></div>\n</div>\n<p>If you have a runhouse account, which you can create\n<a class=\"reference external\" href=\"run.house/login\">here</a> or by calling either the <code class=\"docutils literal notranslate\"><span class=\"pre\">runhouse</span> <span class=\"pre\">login</span></code>\nCLI command or <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.login()</span></code> Python command, you can sync secrets (to\nVault) associated your account, and download existing secrets or upload\nnew secrets from your environment.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># show supported builtin providers</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">builtin_providers</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">[</span><span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">aws_secrets</span><span class=\"o\">.</span><span class=\"n\">AWSSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x106743b20</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">azure_secrets</span><span class=\"o\">.</span><span class=\"n\">AzureSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x1067439d0</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">gcp_secrets</span><span class=\"o\">.</span><span class=\"n\">GCPSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x123cb9cd0</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">huggingface_secrets</span><span class=\"o\">.</span><span class=\"n\">HuggingFaceSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x123cb9af0</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">lambda_secrets</span><span class=\"o\">.</span><span class=\"n\">LambdaSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x123cb9e50</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">sky_secrets</span><span class=\"o\">.</span><span class=\"n\">SkySecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x123cd37c0</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">ssh_secrets</span><span class=\"o\">.</span><span class=\"n\">SSHSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x123cd3880</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n <span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">rns</span><span class=\"o\">.</span><span class=\"n\">secrets</span><span class=\"o\">.</span><span class=\"n\">github_secrets</span><span class=\"o\">.</span><span class=\"n\">GitHubSecrets</span> <span class=\"n\">at</span> <span class=\"mh\">0x123cd38e0</span><span class=\"o\">&gt;</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># Upload secrets into Vault</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">save_provider_secrets</span><span class=\"p\">(</span><span class=\"n\">secrets</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;azure&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;subscription_id&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;12345&quot;</span><span class=\"p\">}})</span>\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">download_into_env</span><span class=\"p\">()</span>\n\n<span class=\"o\">!</span>cat<span class=\"w\"> </span>~/.azure/clouds.config\n</pre></div>\n</div>\n<pre class=\"code-output literal-block\">WARNING | 2023-06-21 08:03:55,081 | Received secrets ['azure'] which Runhouse did not auto-detect as configured. For cloud providers, you may want to run <cite>sky check</cite> to double check that they're enabled and to see instructions on how to enable them.\nINFO | 2023-06-21 08:03:55,084 | Getting secrets from Vault.\nWARNING | 2023-06-21 08:03:56,614 | Key id_rsa already exists, skipping.\nWARNING | 2023-06-21 08:03:56,615 | Key id_rsa.pub already exists, skipping.\nWARNING | 2023-06-21 08:03:56,970 | Received secrets ['gcp', 'lambda'] which Runhouse did not auto-detect as configured. For cloud providers, you may want to run <cite>sky check</cite> to double check that they're enabled and to see instructions on how to enable them.\nINFO | 2023-06-21 08:03:56,972 | Saved secrets from Vault to local config files\n[AzureCloud]\nsubscription = 12345</pre>\n<p>If you already have secrets configured locally in a config file or in\nyour environment, you can also use <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.Secrets.put()</span></code> to upload them\ninto Vault.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">Secrets</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">(</span><span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">,</span> <span class=\"n\">from_env</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"c1\"># rh.Secrets.put(&quot;aws&quot;, file_path=&quot;~/.aws/credentials&quot;)</span>\n</pre></div>\n</div>\n<p>If you have secrets from Vault that you\u2019d like to sync to local, you can\nuse <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.Secrets.download_into_env()</span></code> to download them into your local\nconfig files, or <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.Secrets.get(&quot;azure&quot;)</span></code> to get the secrets\ndictionary.</p>\n<p>There are also options when logging in through <code class=\"docutils literal notranslate\"><span class=\"pre\">runhouse</span> <span class=\"pre\">login</span></code> or\n<code class=\"docutils literal notranslate\"><span class=\"pre\">rh.login()</span></code>, to choose which secrets you want to upload into Vault,\nand which ones to download down from Vault.</p>\n<p>When you logout with <code class=\"docutils literal notranslate\"><span class=\"pre\">runhouse</span> <span class=\"pre\">logout</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.logout()</span></code>, you can\nchoose to remove locally saved secrets or delete them from Vault.</p>\n</section>\n<section id=\"setting-config-options\">\n<h2>Setting Config Options<a class=\"headerlink\" href=\"#setting-config-options\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>Runhouse stores user configs both locally in <code class=\"docutils literal notranslate\"><span class=\"pre\">~/.rh/config.yaml</span></code> and\nremotely in the Runhouse database, letting you preserve your same config\nacross environments.</p>\n<p>Some configs to consider setting: *\n<code class=\"docutils literal notranslate\"><span class=\"pre\">rh.configs.set('use_spot',</span> <span class=\"pre\">True)</span></code>: Whether to use spot instances,\nwhich are cheaper but can be reclaimed at any time. This is <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code> by\ndefault, because you\u2019ll need to request spot quota from the cloud\nproviders to use spot instances.</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">rh.configs.set('default_autostop',</span> <span class=\"pre\">30)</span></code>: Default autostop time (or\n-1 for indefinitely) for the on-demand cluster, to dynamically stop\nthe cluster after inactivity to save money. You can also call\n<code class=\"docutils literal notranslate\"><span class=\"pre\">cluster.keep_warm(autostop=60)</span></code> to control this for an existing\ncluster.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">rh.configs.set('default_provider',</span> <span class=\"pre\">'cheapest')</span></code>: Default cloud\nprovider to use for your on-demand cluster, or <code class=\"docutils literal notranslate\"><span class=\"pre\">cheapest</span></code> selects\nthe cheapest provider for the desired hardware.</p></li>\n</ul>\n<p>To save updated configs to Runhouse, to be accessed from elsewhere:</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">configs</span><span class=\"o\">.</span><span class=\"n\">upload_defaults</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</section>\n<section id=\"local-rns\">\n<h2>Local RNS<a class=\"headerlink\" href=\"#local-rns\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>The Local RNS is a git-based approach that allows for local persistence\nand versioning, or sharing across OSS projects. It lets you publish the\nexact resource metadata in the same version tree as your code, and can\nbe a highly visible way to publish distribute resources, such as cloud\nconfigurations and data artifacts, to OSS users.</p>\n<p>Local Resources live in the current local folder; they are saved down\ninto the <cite>rh</cite> folder of the current Git working directory.</p>\n<p>If you are not logged into a Runhouse account, calling <cite>.save()</cite> will\nsave down resources locally by default. If you are logged into a Runhouse\naccount however, Resources will be saved into Runhouse RNS by default, so\nif you would like to specify creating a local resource, you can do so by\nexplicitly setting the resource name to begin with <cite>~/</cite> to signal that it\nlives in the current folder.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_resource</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;~/aws_cluster&#39;</span><span class=\"p\">,</span> <span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"s1\">&#39;V100:1&#39;</span><span class=\"p\">,</span> <span class=\"n\">provider</span><span class=\"o\">=</span><span class=\"s1\">&#39;aws&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">my_resource</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">15</span><span class=\"p\">:</span><span class=\"mi\">57</span><span class=\"p\">,</span><span class=\"mi\">611</span> <span class=\"o\">|</span> <span class=\"n\">Saving</span> <span class=\"n\">config</span> <span class=\"k\">for</span> <span class=\"o\">~/</span><span class=\"n\">aws_cluster</span> <span class=\"n\">to</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">caroline</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">/</span><span class=\"n\">rh</span><span class=\"o\">/</span><span class=\"n\">aws_cluster</span><span class=\"o\">/</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">json</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">hardware</span><span class=\"o\">.</span><span class=\"n\">on_demand_cluster</span><span class=\"o\">.</span><span class=\"n\">OnDemandCluster</span> <span class=\"n\">at</span> <span class=\"mh\">0x1661c7040</span><span class=\"o\">&gt;</span>\n</pre></div>\n</div>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">!</span>cat<span class=\"w\"> </span>/Users/caroline/Documents/runhouse/runhouse/rh/aws_cluster/config.json\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span>\n    <span class=\"s2\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;~/aws_cluster&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;resource_type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;cluster&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;resource_subtype&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;OnDemandCluster&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;instance_type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;V100:1&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;num_instances&quot;</span><span class=\"p\">:</span> <span class=\"n\">null</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;provider&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;aws&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;autostop_mins&quot;</span><span class=\"p\">:</span> <span class=\"mi\">30</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;use_spot&quot;</span><span class=\"p\">:</span> <span class=\"n\">false</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;image_id&quot;</span><span class=\"p\">:</span> <span class=\"n\">null</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;region&quot;</span><span class=\"p\">:</span> <span class=\"n\">null</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;sky_state&quot;</span><span class=\"p\">:</span> <span class=\"n\">null</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p>To load a resource, you can call <code class=\"docutils literal notranslate\"><span class=\"pre\">rh.load('resource_name')</span></code>, or use\nthe resource factory method, passing in only the name.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">del</span> <span class=\"n\">my_resource</span>\n\n<span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s2\">&quot;~/aws_cluster&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">20</span><span class=\"p\">:</span><span class=\"mi\">03</span><span class=\"p\">,</span><span class=\"mi\">710</span> <span class=\"o\">|</span> <span class=\"n\">Loading</span> <span class=\"n\">config</span> <span class=\"kn\">from</span> <span class=\"nn\">local</span> <span class=\"n\">file</span> <span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">caroline</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">/</span><span class=\"n\">rh</span><span class=\"o\">/</span><span class=\"n\">aws_cluster</span><span class=\"o\">/</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">json</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">hardware</span><span class=\"o\">.</span><span class=\"n\">on_demand_cluster</span><span class=\"o\">.</span><span class=\"n\">OnDemandCluster</span> <span class=\"n\">at</span> <span class=\"mh\">0x1231023d0</span><span class=\"o\">&gt;</span>\n</pre></div>\n</div>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">ondemand_cluster</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;~/aws_cluster&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">20</span><span class=\"p\">:</span><span class=\"mi\">20</span><span class=\"p\">,</span><span class=\"mi\">156</span> <span class=\"o\">|</span> <span class=\"n\">Loading</span> <span class=\"n\">config</span> <span class=\"kn\">from</span> <span class=\"nn\">local</span> <span class=\"n\">file</span> <span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">caroline</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">/</span><span class=\"n\">rh</span><span class=\"o\">/</span><span class=\"n\">aws_cluster</span><span class=\"o\">/</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">json</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">hardware</span><span class=\"o\">.</span><span class=\"n\">on_demand_cluster</span><span class=\"o\">.</span><span class=\"n\">OnDemandCluster</span> <span class=\"n\">at</span> <span class=\"mh\">0x12324b400</span><span class=\"o\">&gt;</span>\n</pre></div>\n</div>\n</section>\n<section id=\"runhouse-rns\">\n<h2>Runhouse RNS<a class=\"headerlink\" href=\"#runhouse-rns\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>The Runhouse RNS is a key-value metadata store that allows resources to\nbe shared across users or environments, and does not need to be backed\nby Git. It works anywhere with an internet connection and Python\ninterpreter, making it more portable. The RNS is also backed by a\nmanagement dashboard to view and manage all resources, including\ncreation and update history.</p>\n<p>To use the Runhouse RNS, you will need a <a class=\"reference external\" href=\"https://www.run.house/login\">Runhouse\naccount</a>.</p>\n<p>The following resource, whose name <code class=\"docutils literal notranslate\"><span class=\"pre\">my_blob</span></code> does not begin with\n<code class=\"docutils literal notranslate\"><span class=\"pre\">~/</span></code>, will be saved into the Runhouse RNS.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">pickle</span>\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">pickle</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)))</span>\n\n<span class=\"n\">my_resource</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">blob</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_blob&quot;</span><span class=\"p\">,</span> <span class=\"n\">system</span><span class=\"o\">=</span><span class=\"s2\">&quot;s3&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">()</span>  <span class=\"c1\"># write data to linked s3</span>\n<span class=\"n\">my_resource</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">,</span><span class=\"mi\">351</span> <span class=\"o\">|</span> <span class=\"n\">Creating</span> <span class=\"n\">new</span> <span class=\"n\">s3</span> <span class=\"n\">folder</span> <span class=\"k\">if</span> <span class=\"n\">it</span> <span class=\"n\">does</span> <span class=\"ow\">not</span> <span class=\"n\">already</span> <span class=\"n\">exist</span> <span class=\"ow\">in</span> <span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">-</span><span class=\"n\">blob</span><span class=\"o\">/</span><span class=\"n\">d57201aa760b4893800c7e3782117b3b</span><span class=\"o\">/</span><span class=\"n\">carolineechen</span>\n<span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">,</span><span class=\"mi\">368</span> <span class=\"o\">|</span> <span class=\"n\">Found</span> <span class=\"n\">credentials</span> <span class=\"ow\">in</span> <span class=\"n\">shared</span> <span class=\"n\">credentials</span> <span class=\"n\">file</span><span class=\"p\">:</span> <span class=\"o\">~/.</span><span class=\"n\">aws</span><span class=\"o\">/</span><span class=\"n\">credentials</span>\n<span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">06</span><span class=\"p\">,</span><span class=\"mi\">305</span> <span class=\"o\">|</span> <span class=\"n\">Creating</span> <span class=\"n\">new</span> <span class=\"n\">s3</span> <span class=\"n\">folder</span> <span class=\"k\">if</span> <span class=\"n\">it</span> <span class=\"n\">does</span> <span class=\"ow\">not</span> <span class=\"n\">already</span> <span class=\"n\">exist</span> <span class=\"ow\">in</span> <span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">-</span><span class=\"n\">blob</span><span class=\"o\">/</span><span class=\"n\">d57201aa760b4893800c7e3782117b3b</span><span class=\"o\">/</span><span class=\"n\">carolineechen</span>\n<span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">06</span><span class=\"p\">,</span><span class=\"mi\">462</span> <span class=\"o\">|</span> <span class=\"n\">Saving</span> <span class=\"n\">config</span> <span class=\"n\">to</span> <span class=\"n\">RNS</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;name&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;/carolineechen/my_blob&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;resource_type&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;blob&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;resource_subtype&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;Blob&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;path&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;/runhouse-blob/d57201aa760b4893800c7e3782117b3b/carolineechen/my_blob&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;system&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;s3&#39;</span><span class=\"p\">}</span>\n<span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">07</span><span class=\"p\">,</span><span class=\"mi\">078</span> <span class=\"o\">|</span> <span class=\"n\">Config</span> <span class=\"n\">updated</span> <span class=\"ow\">in</span> <span class=\"n\">RNS</span> <span class=\"k\">for</span> <span class=\"n\">Runhouse</span> <span class=\"n\">URI</span> <span class=\"o\">&lt;</span><span class=\"n\">resource</span><span class=\"o\">/</span><span class=\"n\">carolineechen</span><span class=\"p\">:</span><span class=\"n\">my_blob</span><span class=\"o\">&gt;</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">runhouse</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">Blob</span> <span class=\"n\">at</span> <span class=\"mh\">0x16703ee80</span><span class=\"o\">&gt;</span>\n</pre></div>\n</div>\n<p>This resource can then be reloaded and reused not only from local, but\nalso from any other environment, cluster, or device that you\u2019re logged\ninto!</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">del</span> <span class=\"n\">my_resource</span>\n\n<span class=\"n\">loaded</span> <span class=\"o\">=</span> <span class=\"n\">rh</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s2\">&quot;my_blob&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">pickle</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">loaded</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">598</span> <span class=\"o\">|</span> <span class=\"n\">Attempting</span> <span class=\"n\">to</span> <span class=\"n\">load</span> <span class=\"n\">config</span> <span class=\"k\">for</span> <span class=\"o\">/</span><span class=\"n\">carolineechen</span><span class=\"o\">/</span><span class=\"n\">my_blob</span> <span class=\"kn\">from</span> <span class=\"nn\">RNS.</span>\n<span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">936</span> <span class=\"o\">|</span> <span class=\"n\">Creating</span> <span class=\"n\">new</span> <span class=\"n\">s3</span> <span class=\"n\">folder</span> <span class=\"k\">if</span> <span class=\"n\">it</span> <span class=\"n\">does</span> <span class=\"ow\">not</span> <span class=\"n\">already</span> <span class=\"n\">exist</span> <span class=\"ow\">in</span> <span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">runhouse</span><span class=\"o\">-</span><span class=\"n\">blob</span><span class=\"o\">/</span><span class=\"n\">d57201aa760b4893800c7e3782117b3b</span><span class=\"o\">/</span><span class=\"n\">carolineechen</span>\n<span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">970</span> <span class=\"o\">|</span> <span class=\"n\">Found</span> <span class=\"n\">credentials</span> <span class=\"ow\">in</span> <span class=\"n\">shared</span> <span class=\"n\">credentials</span> <span class=\"n\">file</span><span class=\"p\">:</span> <span class=\"o\">~/.</span><span class=\"n\">aws</span><span class=\"o\">/</span><span class=\"n\">credentials</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>The portability is extended to any teammates or person you want to share\nyour resource with. Simply call <code class=\"docutils literal notranslate\"><span class=\"pre\">.share()</span></code> on the resource, and pass\nin the emails (must be associated with a Runhouse account) of the people\nto share it with. Further customize their resource access, and whether\nto notify them.</p>\n<div class=\"highlight-ipython3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">loaded</span><span class=\"o\">.</span><span class=\"n\">share</span><span class=\"p\">(</span>\n    <span class=\"n\">users</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;teammate1@email.com&quot;</span><span class=\"p\">],</span>\n    <span class=\"n\">access_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;write&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">INFO</span> <span class=\"o\">|</span> <span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">06</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"mi\">22</span><span class=\"p\">:</span><span class=\"mi\">38</span><span class=\"p\">:</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">252</span> <span class=\"o\">|</span> <span class=\"n\">Attempting</span> <span class=\"n\">to</span> <span class=\"n\">load</span> <span class=\"n\">config</span> <span class=\"k\">for</span> <span class=\"o\">/</span><span class=\"n\">carolineechen</span><span class=\"o\">/</span><span class=\"n\">my_blob</span> <span class=\"kn\">from</span> <span class=\"nn\">RNS.</span>\n</pre></div>\n</div>\n<div class=\"code-output highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">({},</span> <span class=\"p\">{</span><span class=\"s1\">&#39;teammate1@email.com&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;write&#39;</span><span class=\"p\">})</span>\n</pre></div>\n</div>\n</section>\n</section>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            kernelName: \"python3\",\n            path: \"./tutorials/api\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>", "metatags": "<meta name=\"generator\" content=\"Docutils 0.18.1: http://docutils.sourceforge.net/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["api/python", "Python API", "N", "next"], ["tutorials/api/data", "Data: Folders, Tables, &amp; Blobs", "P", "previous"]], "sourcename": "tutorials/api/accessibility.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Accessibility: Resource and Secrets Management</a><ul>\n<li><a class=\"reference internal\" href=\"#secrets-management\">Secrets Management</a></li>\n<li><a class=\"reference internal\" href=\"#setting-config-options\">Setting Config Options</a></li>\n<li><a class=\"reference internal\" href=\"#local-rns\">Local RNS</a></li>\n<li><a class=\"reference internal\" href=\"#runhouse-rns\">Runhouse RNS</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "globaltoc": "<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Getting Started</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/quick_start/\">Quick Start Guide</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"architecture/\">Architecture Overview</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api_tutorials/\">API Tutorials</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/compute/\">Compute: Clusters, Functions, Packages, &amp; Envs</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/data/\">Data: Folders, Tables, &amp; Blobs</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"tutorials/api/accessibility/\">Accessibility: Resource and Secrets Management</a></li>\n</ul>\n</li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API Reference</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/python/\">Python API</a><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/resource/\">Resource</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/function/\">Function</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/cluster/\">Cluster</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/env/\">Env</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/package/\">Package</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/run/\">Run</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/module/\">Module</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/folder/\">Folder</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/table/\">Table</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/blob/\">Blob</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/python/secrets/\">Secrets</a></li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api/cli/\">Command Line Interface</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Usage Examples</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/inference/\">Inference: Stable Diffusion and FLAN-T5</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/training/\">Training: Transformers</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"tutorials/examples/distributed/\">Distributed: HF Accelerate</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/funhouse/tree/main/bert_pipeline\">Pipelining: BERT</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Additional Resources</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"debugging_logging/\">Debugging and Logging</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"troubleshooting/\">Manual Setup and Troubleshooting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"data_collection/\">Security and Metadata Collection</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/runhouse\">Source Code</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://api.run.house/docs\">REST API Guide</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://www.run.house/dashboard\">Dashboard</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/run-house/funhouse\">Funhouse</a></li>\n</ul>\n", "current_page_name": "tutorials/api/accessibility", "sidebars": ["about.html", "navigation.html", "relations.html", "searchbox.html", "donate.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12"}